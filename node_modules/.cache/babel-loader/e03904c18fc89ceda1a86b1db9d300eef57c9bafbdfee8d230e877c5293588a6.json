{"ast":null,"code":"import Breadcrumbs from\"@mui/material/Breadcrumbs\";import HomeIcon from\"@mui/icons-material/Home\";import ExpandMoreIcon from\"@mui/icons-material/ExpandMore\";import{emphasize,styled}from\"@mui/material/styles\";import Chip from\"@mui/material/Chip\";import MenuItem from\"@mui/material/MenuItem\";import Select from\"@mui/material/Select\";import{useEffect,useState,useCallback,useRef,useContext}from\"react\";import Rating from\"@mui/material/Rating\";import{FaCloudUploadAlt}from\"react-icons/fa\";import{Icon}from\"@mui/material\";import Button from\"@mui/material/Button\";import CloseIcon from\"@mui/icons-material/Close\";import api from\"../../../api/api\";import{useParams}from\"react-router-dom\";import TurndownService from\"turndown\";import Loading from\"../../../components/loading\";import ReactQuill from\"react-quill\";import\"react-quill/dist/quill.snow.css\";import{useNavigate}from\"react-router-dom\";import{normalizeFileName,convertToWords}from\"../../../utils/formart\";import Markdown from\"markdown-to-jsx\";import MarkdownIt from\"markdown-it\";import{AdminContext}from\"../../../App\";import{baseIMG_,baseURL_,base_}from\"../../../utils/env\";//breadcrumb code\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const StyledBreadcrumb=styled(Chip)(_ref=>{let{theme}=_ref;const backgroundColor=theme.palette.mode===\"light\"?theme.palette.grey[100]:theme.palette.grey[800];return{backgroundColor,height:theme.spacing(3),color:theme.palette.text.primary,fontWeight:theme.typography.fontWeightRegular,\"&:hover, &:focus\":{backgroundColor:emphasize(backgroundColor,0.06)},\"&:active\":{boxShadow:theme.shadows[1],backgroundColor:emphasize(backgroundColor,0.12)}};});const ProductUpload=()=>{const{id}=useParams();const navigate=useNavigate();const turndownService=new TurndownService();const md=new MarkdownIt();const reactQuillRef=useRef();const[name,setName]=useState(\"\");const[dataCategory,setdataCategory]=useState();const[brand,setBrand]=useState(\"\");const[quantity,setQuantity]=useState(0);const[discount,setDiscount]=useState(0);const[price,setPrice]=useState(0);const[ratingsValue,setRatingValue]=useState(1);const[description,setDescription]=useState(\"\");const[selectedCategoryOption,setSelectedCategoryOption]=useState(\"\");const[images,setImages]=useState([]);const[isLoading,setIsLoading]=useState(false);const[inputColor,setInputColor]=useState(\"\");const[inputSize,setInputSize]=useState(\"\");const[sizeValue,setSizeValue]=useState([]);const[colorValue,setColorValue]=useState([]);const[array_img,setArray_Img]=useState();const[formFields,setFormFields]=useState({color:[],size:[],url:[]});const getDataCate=async()=>{try{const responsive=await api.get(\"\".concat(baseURL_,\"/categori/\"));if(responsive.data.status===true){setdataCategory(responsive.data.data);}}catch(error){console.log(\"error\",error);}};const context=useContext(AdminContext);useEffect(()=>{context.setisHideSidebarAndHeader(false);if(!context.isLogin||!context.shop){navigate(\"/login\");}getDataCate();dataProducts();},[context,id]);const dataProducts=async()=>{const products=await api.get(\"\".concat(baseURL_,\"/shose/\").concat(id));const dataProduct=products.data.data;const arr_img=products.data.imgShose.map(img=>img.images).flat();const initialImagesWithURLs=arr_img.map(name=>({url:\"\".concat(baseIMG_).concat(name),name}));// console.log(\"dataProduct\", dataProduct.parentCategory._id);\nsetArray_Img(products.data.imgShose);setName(dataProduct.name);setDiscount(dataProduct.discount);setBrand(dataProduct.brand);setQuantity(dataProduct.quantity);setPrice(dataProduct.price);setColorValue(dataProduct.color);setSizeValue(dataProduct.size);setImages(initialImagesWithURLs);setSelectedCategoryOption(dataProduct.parentCategory?dataProduct.parentCategory._id:null);// const htmlDescription = md.render(dataProduct.description);\n// turndownService.turndown(description)\nsetDescription(dataProduct.description);setFormFields(prevFields=>({...prevFields,color:dataProduct.color,size:dataProduct.size,url:initialImagesWithURLs}));// console.log(\"description\", htmlDescription);\n};const handleKeyColor=e=>{if(e.key===\"Enter\"){e.preventDefault();if(inputColor.trim()!==\"\"){const newColors=inputColor.split(\",\").map(color=>color.trim()).filter(color=>color!==\"\");const uniqueColors=newColors.filter(i=>!colorValue.includes(i));setColorValue(prevColors=>[...prevColors,...uniqueColors]);setInputColor(\"\");setFormFields(prevFields=>({...prevFields,color:[...new Set([...prevFields.color,...uniqueColors])]}));}}};const removeColor=index=>{setColorValue(prevColors=>prevColors.filter((_,i)=>i!==index));setFormFields(prevFields=>({...prevFields,color:prevFields.color.filter((_,i)=>i!==index)}));};// size\nconst handleKeySize=e=>{if(e.key===\"Enter\"){e.preventDefault();if(inputSize.trim()!==\"\"){const newSize=inputSize.split(\",\").map(size=>size.trim()).filter(size=>size!==\"\");const uniqueSize=newSize.filter(i=>!sizeValue.includes(i));setSizeValue(prev=>[...prev,...uniqueSize]);setFormFields(prevFields=>({...prevFields,size:[...new Set([...prevFields.size,...uniqueSize])]}));setInputSize(\"\");}}};// Hàm để xóa màu khỏi mảng colors\nconst removeSize=index=>{setSizeValue(prev=>prev.filter((_,i)=>i!==index));setFormFields(prevFields=>({...prevFields,size:prevFields.size.filter((_,i)=>i!==index)}));};const onChangeImages=e=>{const files=Array.from(e.target.files);const newImagesWithRenamed=files.map(file=>{const renamedFile=new File([file],normalizeFileName(file.name),{type:file.type});return renamedFile;});// console.log('New image name:',newImagesWithRenamed);\nconst newImages=newImagesWithRenamed.filter(file=>!images.some(image=>image.name===file.name));const newImagesWithURLs=newImages.map(file=>({url:\"\".concat(baseIMG_).concat(file.name),name:file.name}));setImages(prevImages=>[...prevImages,...newImagesWithURLs]);setFormFields(prevFields=>({...prevFields,url:[...prevFields.url,...newImagesWithURLs]}));};const handleRemoveImage=index=>{setImages(prevImages=>prevImages.filter((_,i)=>i!==index));setFormFields(prevFields=>({...prevFields,url:formFields.url.filter((_,i)=>i!==index)}));};const upfile=async()=>{const formData=new FormData();// Thêm các file từ formFields.url vào FormData\nformFields.url.forEach(image=>{formData.append(\"files\",image);});try{const response=await api.post(\"\".concat(baseURL_,\"/uploads\"),formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});return response.status;}catch(error){console.error(\"Upload failed\",error);}};const updateImg=async idProduct=>{try{const response=await api.put(\"\".concat(baseURL_,\"/imgshose/\").concat(idProduct),{images:formFields.url.slice(1).map(image=>image.name)});return response.status;}catch(error){console.error(\"Upload failed\",error);}};// console.log(\"Upload\",formFields)\n// console.log(\"formFields.url\",formFields.url.slice(1).map((image) => image.name))\nconst submitForm=async e=>{e.preventDefault();if(name===\"\"){return window.alert(\"Please input name enter\");}if(brand===\"\"){return window.alert(\"Please input brand enter\");}if(quantity===0){return window.alert(\"Please input quantity enter\");}if(colorValue.length===0){return window.alert(\"Please input color enter\");}if(images.length===0){return window.alert(\"Please input images enter\");}if(sizeValue.length===0){return window.alert(\"Please input size enter\");}if(selectedCategoryOption===\"\"){return window.alert(\"Please input dataCategory enter\");}try{setIsLoading(true);const file=await upfile();const jsonData={parentCategory:selectedCategoryOption,name:name,brand:brand,price:price,quantity:parseInt(quantity),discount:parseFloat(discount!==0?discount:0),color:formFields.color.filter(color=>color.trim()!==\"\"),description:description,size:formFields.size.filter(color=>color.trim()!==\"\"),imageUrl:normalizeFileName(formFields.baseURL_[0].name)};// console.log(\"jsonData\", jsonData);\n// console.log(\"color\", jsonData.color);\n// console.log(\"description\", jsonData.description);\n// console.log(\"imageUrl\", jsonData.imageUrl);\n// console.log(\"parentCategory\", jsonData.parentCategory);\nconst response=await api.put(\"\".concat(baseURL_,\"/shose/\").concat(id),jsonData,{headers:{\"Content-Type\":\"application/json\"}});if(response.data.status===true){const img=await updateImg(id);if(img===200){window.alert(\"Cập nhật sản phẩm thành công\");navigate('/products');}else{window.alert(\"Error\");}}// console.log(response.data);\n}catch(error){console.error(\"Cấu hình lỗi:\",error.message);}finally{setIsLoading(false);}};const decodeHTML=html=>{const txt=document.createElement(\"textarea\");txt.innerHTML=html;return txt.value;};const handleFileUpload=async(file,endpoint)=>{const formData=new FormData();formData.append(\"file\",file);const response=await fetch(\"\".concat(baseURL_).concat(endpoint),{method:\"POST\",body:formData});if(response.ok){const data=await response.json();return data.url;}else{throw new Error(\"Failed to upload file\");}};const imageHandler=useCallback(()=>{const input=document.createElement(\"input\");input.setAttribute(\"type\",\"file\");input.setAttribute(\"accept\",\"image/*\");input.setAttribute(\"multiple\",true);input.click();input.onchange=async()=>{if(input.files!==null&&input.files.length>0){const file=input.files[0];const renamedFile=new File([file],normalizeFileName(file.name),{type:file.type});// Đọc ảnh và hiển thị ngay lập tức\nconst reader=new FileReader();reader.onload=()=>{const dataURL=reader.result;const quill=reactQuillRef.current.getEditor();const cursorPosition=quill.getSelection().index||0;quill.insertEmbed(cursorPosition,\"image\",dataURL,\"user\");// Tải ảnh lên server và thay thế base64 bằng URL\nhandleFileUpload(renamedFile,\"/upload-image\").then(Purl=>{console.log('Purl',Purl);const editor=quill.root;const images=editor.getElementsByTagName(\"img\");for(let i=0;i<images.length;i++){if(images[i].src===dataURL){images[i].src=base_+Purl;break;}}}).catch(error=>{console.error(\"Error uploading image:\",error);// Tìm và xóa ảnh base64 đã chèn\nconst editor=quill.root;const images=editor.getElementsByTagName(\"img\");for(let i=0;i<images.length;i++){if(images[i].src===dataURL){images[i].parentNode.removeChild(images[i]);break;}}alert(\"Lỗi update ảnh.\");});};reader.readAsDataURL(renamedFile);}};},[reactQuillRef]);const videoHandler=useCallback(()=>{const url=prompt(\"Please enter the video URL (YouTube, TikTok) or choose a file to upload:\");if(url){let embedUrl=\"\";if(url.includes(\"youtube.com\")||url.includes(\"youtu.be\")){var _url$split$;const videoId=((_url$split$=url.split(\"v=\")[1])===null||_url$split$===void 0?void 0:_url$split$.split(\"&\")[0])||url.split(\"/\").pop();embedUrl=\"https://www.youtube.com/embed/\".concat(videoId);}else if(url.includes(\"tiktok.com\")){var _url$split$2;const videoId=(_url$split$2=url.split(\"/video/\")[1])===null||_url$split$2===void 0?void 0:_url$split$2.split(\"?\")[0];embedUrl=\"https://www.tiktok.com/embed/v2/\".concat(videoId);}else{alert(\"Invalid URL format. Please enter a valid YouTube or TikTok URL.\");return;}const range=reactQuillRef.current.getEditor().getSelection();reactQuillRef.current.getEditor().insertEmbed(range.index,\"video\",embedUrl);}else{const input=document.createElement(\"input\");input.setAttribute(\"type\",\"file\");input.setAttribute(\"accept\",\"video/*\");input.click();input.onchange=async()=>{const file=input.files[0];const renamedFile=new File([file],normalizeFileName(file.name),{type:file.type});// console.log(\"Uploading video\", file);\ntry{// Handle the video file upload\nconst PathUrl=await handleFileUpload(renamedFile,\"/upload-video\");const range=reactQuillRef.current.getEditor().getSelection();reactQuillRef.current.getEditor().insertEmbed(range.index,\"video\",\"\".concat(base_,\"/video\")+PathUrl);}catch(error){alert(\"Error uploading video.\");console.error(\"Error uploading video:\",error);}};}},[reactQuillRef]);return/*#__PURE__*/_jsx(_Fragment,{children:isLoading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"right-content w-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow border-0 w-100 flex-row p-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"Product Upload\"}),/*#__PURE__*/_jsxs(Breadcrumbs,{\"aria-label\":\"breadcrumb\",className:\"ml-auto breadcrumbs_\",children:[/*#__PURE__*/_jsx(StyledBreadcrumb,{component:\"a\",href:\"#\",label:\"Dashboard\",icon:/*#__PURE__*/_jsx(HomeIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(StyledBreadcrumb,{component:\"a\",label:\"Products\",href:\"#\",deleteIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{})}),/*#__PURE__*/_jsx(StyledBreadcrumb,{label:\"Product Upload\",deleteIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row22\",children:[/*#__PURE__*/_jsx(\"form\",{className:\"form\",onSubmit:submitForm,children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-4\",children:\"Product Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Name Product\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nameProduct\",value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\" Category Option\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"options\",value:selectedCategoryOption,onChange:e=>setSelectedCategoryOption(e.target.value),className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--Please choose an option--\"}),dataCategory!==undefined&&dataCategory.map(category=>/*#__PURE__*/_jsx(\"option\",{value:\"\".concat(category._id),children:category.name}))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Discount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"discount\",value:discount,onChange:e=>setDiscount(e.target.value)})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Brand\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"brand\",value:brand,onChange:e=>setBrand(e.target.value)})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"quantity\",value:quantity,onChange:e=>setQuantity(e.target.value)}),quantity&&!isNaN(parseInt(quantity))&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:convertToWords(parseInt(quantity))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Price \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:price,name:\"price\",onChange:e=>setPrice(e.target.value)}),price&&!isNaN(parseInt(price))&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:convertToWords(parseInt(price))})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Color\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexWrap:\"wrap\",border:\"1px solid #ccc\",padding:\"5px\",borderRadius:\"4px\"},children:[colorValue.map((color,index)=>/*#__PURE__*/_jsxs(\"span\",{style:{display:\"flex\",alignItems:\"center\",margin:\"2px\",padding:\"2px 5px\",background:\"\".concat(color),borderRadius:\"3px\",border:\"1px solid #ccc\"},children:[color,/*#__PURE__*/_jsx(Icon,{component:CloseIcon,sx:{marginLeft:3,height:20},onClick:()=>removeColor(index)})]},index)),/*#__PURE__*/_jsx(\"input\",{name:\"color\",type:\"text\",value:inputColor,onChange:e=>setInputColor(e.target.value),onKeyPress:handleKeyColor,placeholder:\"Please enter data, separated by commas, then press enter: green,red,blue,...\",style:{border:\"none\",outline:\"none\",flexGrow:1,minWidth:\"100px\"}})]}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"h6\",{children:\"Size\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexWrap:\"wrap\",border:\"1px solid #ccc\",padding:\"5px\",borderRadius:\"4px\"},children:[sizeValue.map((size,index)=>/*#__PURE__*/_jsxs(\"span\",{style:{display:\"flex\",alignItems:\"center\",margin:\"2px\",padding:\"2px 5px\",background:\"#f0f0f0\",borderRadius:\"3px\",border:\"1px solid #ccc\"},children:[size,/*#__PURE__*/_jsx(Icon,{component:CloseIcon,sx:{marginLeft:3,height:20},onClick:()=>removeSize(index)})]},index)),/*#__PURE__*/_jsx(\"input\",{name:\"size\",type:\"text\",value:inputSize,onChange:e=>setInputSize(e.target.value),onKeyPress:handleKeySize,placeholder:\"Please enter data, separated by commas, then press enter: XL,XX,XS,S,L,SM\",style:{border:\"none\",outline:\"none\",flexGrow:1,minWidth:\"100px\"}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Upload Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:onChangeImages,className:\"form-control\",multiple:true}),images!==undefined&&/*#__PURE__*/_jsx(\"div\",{className:\"image-list\",style:{display:\"flex\",flexWrap:\"wrap\"},children:images.map((image,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"image-item\",style:{position:\"relative\",margin:5},children:[/*#__PURE__*/_jsx(\"img\",{className:\"img-preview\",style:{height:100,width:100},src:image.url,alt:\"Image \".concat(index)}),/*#__PURE__*/_jsx(Icon,{component:CloseIcon,sx:{position:\"absolute\",top:5,right:5,cursor:\"pointer\"},onClick:()=>handleRemoveImage(index)})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",id:\"editor-container\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Depscription\"}),/*#__PURE__*/_jsx(\"div\",{style:{height:\"auto\",marginBottom:\"50px\"},children:/*#__PURE__*/_jsx(ReactQuill,{ref:reactQuillRef,theme:\"snow\",style:{height:\"100%\",width:\"100%\"},value:description,placeholder:\"Ch\\xFA \\xFD : Khi th\\xEAm youtube th\\xEC d\\xF9ng iframe src=https://www.youtube.com/embed/+ m\\xE3 tr\\xEAn youtube \",onChange:setDescription,modules:{toolbar:{container:[[{header:\"1\"},{header:\"2\"},{font:[]}],[{size:[]}],[\"bold\",\"italic\",\"underline\",\"strike\",\"blockquote\"],[{list:\"ordered\"},{list:\"bullet\"},{indent:\"-1\"},{indent:\"+1\"}],[\"link\",\"image\",\"video\"],[\"code-block\"],[\"clean\"]],handlers:{image:imageHandler,video:videoHandler}},clipboard:{matchVisual:false}},formats:[\"header\",\"font\",\"size\",\"bold\",\"italic\",\"underline\",\"strike\",\"blockquote\",\"list\",\"bullet\",\"indent\",\"link\",\"image\",\"video\",\"code-block\"]})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",className:\"btn-blue btn-lg btn-big\",children:[/*#__PURE__*/_jsx(FaCloudUploadAlt,{}),\" \\xA0 UPDATE TO VIEW\"]})]})})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"form-preview-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form-preview\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"HTML Preview depscription:\"}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:decodeHTML(description)}})]})})]})]})});};export default ProductUpload;","map":{"version":3,"names":["Breadcrumbs","HomeIcon","ExpandMoreIcon","emphasize","styled","Chip","MenuItem","Select","useEffect","useState","useCallback","useRef","useContext","Rating","FaCloudUploadAlt","Icon","Button","CloseIcon","api","useParams","TurndownService","Loading","ReactQuill","useNavigate","normalizeFileName","convertToWords","Markdown","MarkdownIt","AdminContext","baseIMG_","baseURL_","base_","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","StyledBreadcrumb","_ref","theme","backgroundColor","palette","mode","grey","height","spacing","color","text","primary","fontWeight","typography","fontWeightRegular","boxShadow","shadows","ProductUpload","id","navigate","turndownService","md","reactQuillRef","name","setName","dataCategory","setdataCategory","brand","setBrand","quantity","setQuantity","discount","setDiscount","price","setPrice","ratingsValue","setRatingValue","description","setDescription","selectedCategoryOption","setSelectedCategoryOption","images","setImages","isLoading","setIsLoading","inputColor","setInputColor","inputSize","setInputSize","sizeValue","setSizeValue","colorValue","setColorValue","array_img","setArray_Img","formFields","setFormFields","size","url","getDataCate","responsive","get","concat","data","status","error","console","log","context","setisHideSidebarAndHeader","isLogin","shop","dataProducts","products","dataProduct","arr_img","imgShose","map","img","flat","initialImagesWithURLs","parentCategory","_id","prevFields","handleKeyColor","e","key","preventDefault","trim","newColors","split","filter","uniqueColors","i","includes","prevColors","Set","removeColor","index","_","handleKeySize","newSize","uniqueSize","prev","removeSize","onChangeImages","files","Array","from","target","newImagesWithRenamed","file","renamedFile","File","type","newImages","some","image","newImagesWithURLs","prevImages","handleRemoveImage","upfile","formData","FormData","forEach","append","response","post","headers","updateImg","idProduct","put","slice","submitForm","window","alert","length","jsonData","parseInt","parseFloat","imageUrl","message","decodeHTML","html","txt","document","createElement","innerHTML","value","handleFileUpload","endpoint","fetch","method","body","ok","json","Error","imageHandler","input","setAttribute","click","onchange","reader","FileReader","onload","dataURL","result","quill","current","getEditor","cursorPosition","getSelection","insertEmbed","then","Purl","editor","root","getElementsByTagName","src","catch","parentNode","removeChild","readAsDataURL","videoHandler","prompt","embedUrl","_url$split$","videoId","pop","_url$split$2","range","PathUrl","children","className","component","href","label","icon","fontSize","deleteIcon","onSubmit","onChange","undefined","category","isNaN","style","display","flexWrap","border","padding","borderRadius","alignItems","margin","background","sx","marginLeft","onClick","onKeyPress","placeholder","outline","flexGrow","minWidth","accept","multiple","position","width","alt","top","right","cursor","marginBottom","ref","modules","toolbar","container","header","font","list","indent","handlers","video","clipboard","matchVisual","formats","dangerouslySetInnerHTML","__html"],"sources":["/Users/trinhdai/DATA/React_Native/BigShose2/client/website/src/components/admin/Products/ProductUpload.js"],"sourcesContent":["import Breadcrumbs from \"@mui/material/Breadcrumbs\";\r\nimport HomeIcon from \"@mui/icons-material/Home\";\r\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\r\nimport { emphasize, styled } from \"@mui/material/styles\";\r\nimport Chip from \"@mui/material/Chip\";\r\n\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport Select from \"@mui/material/Select\";\r\nimport { useEffect, useState, useCallback, useRef ,useContext} from \"react\";\r\nimport Rating from \"@mui/material/Rating\";\r\nimport { FaCloudUploadAlt } from \"react-icons/fa\";\r\nimport { Icon } from \"@mui/material\";\r\nimport Button from \"@mui/material/Button\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\nimport api from \"../../../api/api\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport TurndownService from \"turndown\";\r\nimport Loading from \"../../../components/loading\";\r\n\r\nimport ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { normalizeFileName, convertToWords } from \"../../../utils/formart\";\r\nimport Markdown from \"markdown-to-jsx\";\r\nimport MarkdownIt from \"markdown-it\";\r\nimport { AdminContext } from \"../../../App\";\r\nimport { baseIMG_,baseURL_,base_ } from \"../../../utils/env\";\r\n//breadcrumb code\r\nconst StyledBreadcrumb = styled(Chip)(({ theme }) => {\r\n  const backgroundColor =\r\n    theme.palette.mode === \"light\"\r\n      ? theme.palette.grey[100]\r\n      : theme.palette.grey[800];\r\n  return {\r\n    backgroundColor,\r\n    height: theme.spacing(3),\r\n    color: theme.palette.text.primary,\r\n    fontWeight: theme.typography.fontWeightRegular,\r\n    \"&:hover, &:focus\": {\r\n      backgroundColor: emphasize(backgroundColor, 0.06),\r\n    },\r\n    \"&:active\": {\r\n      boxShadow: theme.shadows[1],\r\n      backgroundColor: emphasize(backgroundColor, 0.12),\r\n    },\r\n  };\r\n});\r\n\r\nconst ProductUpload = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const turndownService = new TurndownService();\r\n  const md = new MarkdownIt();\r\n  const reactQuillRef = useRef();\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [dataCategory, setdataCategory] = useState();\r\n  const [brand, setBrand] = useState(\"\");\r\n  const [quantity, setQuantity] = useState(0);\r\n  const [discount, setDiscount] = useState(0);\r\n\r\n  const [price, setPrice] = useState(0);\r\n\r\n  const [ratingsValue, setRatingValue] = useState(1);\r\n\r\n  const [description, setDescription] = useState(\"\");\r\n\r\n  const [selectedCategoryOption, setSelectedCategoryOption] = useState(\"\");\r\n  const [images, setImages] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const [inputColor, setInputColor] = useState(\"\");\r\n  const [inputSize, setInputSize] = useState(\"\");\r\n\r\n  const [sizeValue, setSizeValue] = useState([]);\r\n  const [colorValue, setColorValue] = useState([]);\r\n  const [array_img, setArray_Img] = useState();\r\n\r\n  const [formFields, setFormFields] = useState({\r\n    color: [],\r\n    size: [],\r\n    url: [],\r\n  });\r\n\r\n  const getDataCate = async () => {\r\n    try {\r\n      const responsive = await api.get(`${baseURL_}/categori/`);\r\n      if (responsive.data.status === true) {\r\n        setdataCategory(responsive.data.data);\r\n      }\r\n    } catch (error) {\r\n      console.log(\"error\", error);\r\n    }\r\n  };\r\n  const context = useContext(AdminContext);\r\n  useEffect(() => {\r\n    context.setisHideSidebarAndHeader(false);\r\n    if (!context.isLogin || !context.shop) {\r\n      navigate(\"/login\");\r\n    }\r\n    getDataCate();\r\n    dataProducts();\r\n  }, [context, id]);\r\n\r\n  const dataProducts = async () => {\r\n    const products = await api.get(`${baseURL_}/shose/${id}`);\r\n    const dataProduct = products.data.data;\r\n    const arr_img = products.data.imgShose.map((img) => img.images).flat();\r\n    const initialImagesWithURLs = arr_img.map((name) => ({\r\n      url: `${baseIMG_}${name}`,\r\n      name,\r\n    }));\r\n\r\n    // console.log(\"dataProduct\", dataProduct.parentCategory._id);\r\n    setArray_Img(products.data.imgShose);\r\n\r\n    setName(dataProduct.name);\r\n    setDiscount(dataProduct.discount);\r\n    setBrand(dataProduct.brand);\r\n    setQuantity(dataProduct.quantity);\r\n    setPrice(dataProduct.price);\r\n    setColorValue(dataProduct.color);\r\n    setSizeValue(dataProduct.size);\r\n    setImages(initialImagesWithURLs);\r\n    setSelectedCategoryOption(\r\n      dataProduct.parentCategory ? dataProduct.parentCategory._id : null\r\n    );\r\n    // const htmlDescription = md.render(dataProduct.description);\r\n    // turndownService.turndown(description)\r\n\r\n    setDescription(dataProduct.description);\r\n    setFormFields((prevFields) => ({\r\n      ...prevFields,\r\n      color: dataProduct.color,\r\n      size: dataProduct.size,\r\n      url: initialImagesWithURLs,\r\n    }));\r\n    // console.log(\"description\", htmlDescription);\r\n  };\r\n\r\n  const handleKeyColor = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      if (inputColor.trim() !== \"\") {\r\n        const newColors = inputColor\r\n          .split(\",\")\r\n          .map((color) => color.trim())\r\n          .filter((color) => color !== \"\");\r\n\r\n        const uniqueColors = newColors.filter((i) => !colorValue.includes(i));\r\n\r\n        setColorValue((prevColors) => [...prevColors, ...uniqueColors]);\r\n        setInputColor(\"\");\r\n        setFormFields((prevFields) => ({\r\n          ...prevFields,\r\n          color: [...new Set([...prevFields.color, ...uniqueColors])],\r\n        }));\r\n      }\r\n    }\r\n  };\r\n\r\n  const removeColor = (index) => {\r\n    setColorValue((prevColors) => prevColors.filter((_, i) => i !== index));\r\n    setFormFields((prevFields) => ({\r\n      ...prevFields,\r\n      color: prevFields.color.filter((_, i) => i !== index),\r\n    }));\r\n  };\r\n\r\n  // size\r\n  const handleKeySize = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      if (inputSize.trim() !== \"\") {\r\n        const newSize = inputSize\r\n          .split(\",\")\r\n          .map((size) => size.trim())\r\n          .filter((size) => size !== \"\");\r\n\r\n        const uniqueSize = newSize.filter((i) => !sizeValue.includes(i));\r\n\r\n        setSizeValue((prev) => [...prev, ...uniqueSize]);\r\n        setFormFields((prevFields) => ({\r\n          ...prevFields,\r\n          size: [...new Set([...prevFields.size, ...uniqueSize])],\r\n        }));\r\n        setInputSize(\"\");\r\n      }\r\n    }\r\n  };\r\n\r\n  // Hàm để xóa màu khỏi mảng colors\r\n  const removeSize = (index) => {\r\n    setSizeValue((prev) => prev.filter((_, i) => i !== index));\r\n    setFormFields((prevFields) => ({\r\n      ...prevFields,\r\n      size: prevFields.size.filter((_, i) => i !== index),\r\n    }));\r\n  };\r\n  const onChangeImages = (e) => {\r\n    const files = Array.from(e.target.files);\r\n    const newImagesWithRenamed = files.map((file) => {\r\n      const renamedFile = new File([file], normalizeFileName(file.name), {\r\n        type: file.type,\r\n      });\r\n      return renamedFile;\r\n    });\r\n    // console.log('New image name:',newImagesWithRenamed);\r\n    const newImages = newImagesWithRenamed.filter(\r\n      (file) => !images.some((image) => image.name === file.name)\r\n    );\r\n\r\n    const newImagesWithURLs = newImages.map((file) => ({\r\n      url: `${baseIMG_}${file.name}`,\r\n      name:file.name,\r\n    }));\r\n\r\n    setImages((prevImages) => [...prevImages, ...newImagesWithURLs]);\r\n    setFormFields((prevFields) => ({\r\n      ...prevFields,\r\n      url: [...prevFields.url, ...newImagesWithURLs],\r\n    }));\r\n  };\r\n\r\n  const handleRemoveImage = (index) => {\r\n    setImages((prevImages) => prevImages.filter((_, i) => i !== index));\r\n    setFormFields((prevFields) => ({\r\n      ...prevFields,\r\n      url: formFields.url.filter((_, i) => i !== index),\r\n    }));\r\n  };\r\n\r\n  const upfile = async () => {\r\n    const formData = new FormData();\r\n    // Thêm các file từ formFields.url vào FormData\r\n    formFields.url.forEach((image) => {\r\n      formData.append(\"files\", image);\r\n    });\r\n    try {\r\n      const response = await api.post(`${baseURL_}/uploads`, formData, {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" },\r\n      });\r\n      return response.status;\r\n    } catch (error) {\r\n      console.error(\"Upload failed\", error);\r\n    }\r\n  };\r\n  const updateImg = async (idProduct) => {\r\n    try {\r\n      const response = await api.put(`${baseURL_}/imgshose/${idProduct}`, {\r\n        images: formFields.url.slice(1).map((image) => image.name),\r\n      });\r\n      return response.status;\r\n    } catch (error) {\r\n      console.error(\"Upload failed\", error);\r\n    }\r\n  };\r\n  // console.log(\"Upload\",formFields)\r\n  // console.log(\"formFields.url\",formFields.url.slice(1).map((image) => image.name))\r\n\r\n  const submitForm = async (e) => {\r\n    e.preventDefault();\r\n    if (name === \"\") {\r\n      return window.alert(\"Please input name enter\");\r\n    }\r\n    if (brand === \"\") {\r\n      return window.alert(\"Please input brand enter\");\r\n    }\r\n    if (quantity === 0) {\r\n      return window.alert(\"Please input quantity enter\");\r\n    }\r\n    if (colorValue.length === 0) {\r\n      return window.alert(\"Please input color enter\");\r\n    }\r\n    if (images.length === 0) {\r\n      return window.alert(\"Please input images enter\");\r\n    }\r\n    if (sizeValue.length === 0) {\r\n      return window.alert(\"Please input size enter\");\r\n    }\r\n    if (selectedCategoryOption === \"\") {\r\n      return window.alert(\"Please input dataCategory enter\");\r\n    }\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      const file = await upfile();\r\n\r\n      const jsonData = {\r\n        parentCategory: selectedCategoryOption,\r\n        name: name,\r\n        brand: brand,\r\n        price: price,\r\n        quantity: parseInt(quantity),\r\n        discount: parseFloat(discount !== 0 ? discount : 0),\r\n        color: formFields.color.filter((color) => color.trim() !== \"\"),\r\n        description: description,\r\n        size: formFields.size.filter((color) => color.trim() !== \"\"),\r\n        imageUrl: normalizeFileName(formFields.baseURL_[0].name),\r\n      };\r\n      // console.log(\"jsonData\", jsonData);\r\n      // console.log(\"color\", jsonData.color);\r\n      // console.log(\"description\", jsonData.description);\r\n      // console.log(\"imageUrl\", jsonData.imageUrl);\r\n      // console.log(\"parentCategory\", jsonData.parentCategory);\r\n      const response = await api.put(`${baseURL_}/shose/${id}`, jsonData, {\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      });\r\n      if (response.data.status === true) {\r\n        const img = await updateImg(id);\r\n        if (img === 200) {\r\n          window.alert(\"Cập nhật sản phẩm thành công\");\r\n          navigate('/products')\r\n        } else {\r\n          window.alert(\"Error\");\r\n        }\r\n      }\r\n      // console.log(response.data);\r\n    } catch (error) {\r\n      console.error(\"Cấu hình lỗi:\", error.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  const decodeHTML = (html) => {\r\n    const txt = document.createElement(\"textarea\");\r\n    txt.innerHTML = html;\r\n    return txt.value;\r\n  };\r\n  const handleFileUpload = async (file, endpoint) => {\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n\r\n    const response = await fetch(`${baseURL_}${endpoint}`, {\r\n      method: \"POST\",\r\n      body: formData,\r\n    });\r\n    if (response.ok) {\r\n      const data = await response.json();\r\n      return data.url;\r\n    } else {\r\n      throw new Error(\"Failed to upload file\");\r\n    }\r\n  };\r\n\r\n  const imageHandler = useCallback(() => {\r\n    const input = document.createElement(\"input\");\r\n    input.setAttribute(\"type\", \"file\");\r\n    input.setAttribute(\"accept\", \"image/*\");\r\n    input.setAttribute(\"multiple\", true);\r\n    input.click();\r\n\r\n    input.onchange = async () => {\r\n      if (input.files !== null && input.files.length > 0) {\r\n        const file = input.files[0];\r\n        const renamedFile = new File([file], normalizeFileName(file.name), { type: file.type });\r\n        // Đọc ảnh và hiển thị ngay lập tức\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n          const dataURL = reader.result;\r\n          const quill = reactQuillRef.current.getEditor();\r\n          const cursorPosition = quill.getSelection().index || 0;\r\n          quill.insertEmbed(cursorPosition, \"image\", dataURL, \"user\");\r\n          // Tải ảnh lên server và thay thế base64 bằng URL\r\n          handleFileUpload(renamedFile, \"/upload-image\")\r\n            .then((Purl) => {\r\n              console.log('Purl',Purl)\r\n              const editor = quill.root;\r\n              const images = editor.getElementsByTagName(\"img\");\r\n              for (let i = 0; i < images.length; i++) {\r\n                if (images[i].src === dataURL) {\r\n                  images[i].src = base_ + Purl;\r\n                  break;\r\n                }\r\n              }\r\n            })\r\n            .catch((error) => {\r\n              console.error(\"Error uploading image:\", error);\r\n              // Tìm và xóa ảnh base64 đã chèn\r\n              const editor = quill.root;\r\n              const images = editor.getElementsByTagName(\"img\");\r\n              for (let i = 0; i < images.length; i++) {\r\n                if (images[i].src === dataURL) {\r\n                  images[i].parentNode.removeChild(images[i]);\r\n                  break;\r\n                }\r\n              }\r\n              alert(\"Lỗi update ảnh.\");\r\n            });\r\n        };\r\n        reader.readAsDataURL(renamedFile);\r\n      }\r\n    };\r\n  }, [reactQuillRef]);\r\n\r\n  const videoHandler = useCallback(() => {\r\n    const url = prompt(\r\n      \"Please enter the video URL (YouTube, TikTok) or choose a file to upload:\"\r\n    );\r\n    if (url) {\r\n      let embedUrl = \"\";\r\n      if (url.includes(\"youtube.com\") || url.includes(\"youtu.be\")) {\r\n        const videoId =\r\n          url.split(\"v=\")[1]?.split(\"&\")[0] || url.split(\"/\").pop();\r\n        embedUrl = `https://www.youtube.com/embed/${videoId}`;\r\n      } else if (url.includes(\"tiktok.com\")) {\r\n        const videoId = url.split(\"/video/\")[1]?.split(\"?\")[0];\r\n        embedUrl = `https://www.tiktok.com/embed/v2/${videoId}`;\r\n      } else {\r\n        alert(\r\n          \"Invalid URL format. Please enter a valid YouTube or TikTok URL.\"\r\n        );\r\n        return;\r\n      }\r\n      const range = reactQuillRef.current.getEditor().getSelection();\r\n      reactQuillRef.current\r\n        .getEditor()\r\n        .insertEmbed(range.index, \"video\", embedUrl);\r\n    } else {\r\n      const input = document.createElement(\"input\");\r\n      input.setAttribute(\"type\", \"file\");\r\n      input.setAttribute(\"accept\", \"video/*\");\r\n      input.click();\r\n\r\n      input.onchange = async () => {\r\n        const file = input.files[0];\r\n        const renamedFile = new File([file], normalizeFileName(file.name), { type: file.type });\r\n        // console.log(\"Uploading video\", file);\r\n        try {\r\n          // Handle the video file upload\r\n          const PathUrl = await handleFileUpload(renamedFile, \"/upload-video\");\r\n          const range = reactQuillRef.current.getEditor().getSelection();\r\n          reactQuillRef.current\r\n            .getEditor()\r\n            .insertEmbed(range.index, \"video\", `${base_}/video` + PathUrl);\r\n        } catch (error) {\r\n          alert(\"Error uploading video.\");\r\n          console.error(\"Error uploading video:\", error);\r\n        }\r\n      };\r\n    }\r\n  }, [reactQuillRef]);\r\n\r\n  return (\r\n    <>\r\n      {isLoading ? (\r\n        <Loading />\r\n      ) : (\r\n      <div className=\"right-content w-100\">\r\n        <div className=\"card shadow border-0 w-100 flex-row p-4\">\r\n          <h5 className=\"mb-0\">Product Upload</h5>\r\n          <Breadcrumbs aria-label=\"breadcrumb\" className=\"ml-auto breadcrumbs_\">\r\n            <StyledBreadcrumb\r\n              component=\"a\"\r\n              href=\"#\"\r\n              label=\"Dashboard\"\r\n              icon={<HomeIcon fontSize=\"small\" />}\r\n            />\r\n\r\n            <StyledBreadcrumb\r\n              component=\"a\"\r\n              label=\"Products\"\r\n              href=\"#\"\r\n              deleteIcon={<ExpandMoreIcon />}\r\n            />\r\n            <StyledBreadcrumb\r\n              label=\"Product Upload\"\r\n              deleteIcon={<ExpandMoreIcon />}\r\n            />\r\n          </Breadcrumbs>\r\n        </div>\r\n\r\n        <div className=\"row22\">\r\n          <form className=\"form\" onSubmit={submitForm}>\r\n            <div className=\"row\">\r\n              <div className=\"col-sm\">\r\n                <div className=\"card p-4\">\r\n                  <h5 className=\"mb-4\">Product Information</h5>\r\n                  <div className=\"form-group\">\r\n                    <h6>Name Product</h6>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"nameProduct\"\r\n                      value={name}\r\n                      onChange={(e) => setName(e.target.value)}\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <h6> Category Option</h6>\r\n                    <select\r\n                      name=\"options\"\r\n                      value={selectedCategoryOption}\r\n                      onChange={(e) =>\r\n                        setSelectedCategoryOption(e.target.value)\r\n                      }\r\n                      className=\"form-control\"\r\n                    >\r\n                      <option value=\"\">--Please choose an option--</option>\r\n                      {dataCategory !== undefined &&\r\n                        dataCategory.map((category) => (\r\n                          <option value={`${category._id}`}>\r\n                            {category.name}\r\n                          </option>\r\n                        ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div className=\"row\">\r\n                    <div className=\"col-sm\">\r\n                      <div className=\"form-group\">\r\n                        <h6>Discount</h6>\r\n                        <input\r\n                          type=\"number\"\r\n                          name=\"discount\"\r\n                          value={discount}\r\n                          onChange={(e) => setDiscount(e.target.value)}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-sm\">\r\n                      <div className=\"form-group\">\r\n                        <h6>Brand</h6>\r\n                        <input\r\n                          type=\"text\"\r\n                          name=\"brand\"\r\n                          value={brand}\r\n                          onChange={(e) => setBrand(e.target.value)}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"row\">\r\n                    <div className=\"col-sm\">\r\n                      <div className=\"form-group\">\r\n                        <h6>Quantity</h6>\r\n                        <input\r\n                          type=\"number\"\r\n                          name=\"quantity\"\r\n                          value={quantity}\r\n                          onChange={(e) => setQuantity(e.target.value)}\r\n                        />\r\n                        {quantity && !isNaN(parseInt(quantity)) && (\r\n                          <p style={{ color: \"red\" }}>\r\n                            {convertToWords(parseInt(quantity))}\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"col\">\r\n                      <div className=\"form-group\">\r\n                        <h6>Price </h6>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={price}\r\n                          name=\"price\"\r\n                          onChange={(e) => setPrice(e.target.value)}\r\n                        />\r\n                        {price && !isNaN(parseInt(price)) && (\r\n                          <p style={{ color: \"red\" }}>\r\n                            {convertToWords(parseInt(price))}\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <h6>Color</h6>\r\n                    <div\r\n                      style={{\r\n                        display: \"flex\",\r\n                        flexWrap: \"wrap\",\r\n                        border: \"1px solid #ccc\",\r\n                        padding: \"5px\",\r\n                        borderRadius: \"4px\",\r\n                      }}\r\n                    >\r\n                      {colorValue.map((color, index) => (\r\n                        <span\r\n                          key={index}\r\n                          style={{\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            margin: \"2px\",\r\n                            padding: \"2px 5px\",\r\n                            background: `${color}`,\r\n                            borderRadius: \"3px\",\r\n                            border: \"1px solid #ccc\",\r\n                          }}\r\n                        >\r\n                          {color}\r\n                          <Icon\r\n                            component={CloseIcon}\r\n                            sx={{ marginLeft: 3, height: 20 }}\r\n                            onClick={() => removeColor(index)}\r\n                          />\r\n                        </span>\r\n                      ))}\r\n                      <input\r\n                        name=\"color\"\r\n                        type=\"text\"\r\n                        value={inputColor}\r\n                        onChange={(e) => setInputColor(e.target.value)}\r\n                        onKeyPress={handleKeyColor}\r\n                        placeholder=\"Please enter data, separated by commas, then press enter: green,red,blue,...\"\r\n                        style={{\r\n                          border: \"none\",\r\n                          outline: \"none\",\r\n                          flexGrow: 1,\r\n                          minWidth: \"100px\",\r\n                        }}\r\n                      />\r\n                    </div>\r\n                    <br />\r\n                  </div>\r\n                  <h6>Size</h6>\r\n                  <div\r\n                    style={{\r\n                      display: \"flex\",\r\n                      flexWrap: \"wrap\",\r\n                      border: \"1px solid #ccc\",\r\n                      padding: \"5px\",\r\n                      borderRadius: \"4px\",\r\n                    }}\r\n                  >\r\n                    {sizeValue.map((size, index) => (\r\n                      <span\r\n                        key={index}\r\n                        style={{\r\n                          display: \"flex\",\r\n                          alignItems: \"center\",\r\n                          margin: \"2px\",\r\n                          padding: \"2px 5px\",\r\n                          background: `#f0f0f0`,\r\n                          borderRadius: \"3px\",\r\n                          border: \"1px solid #ccc\",\r\n                        }}\r\n                      >\r\n                        {size}\r\n                        <Icon\r\n                          component={CloseIcon}\r\n                          sx={{ marginLeft: 3, height: 20 }}\r\n                          onClick={() => removeSize(index)}\r\n                        />\r\n                      </span>\r\n                    ))}\r\n                    <input\r\n                      name=\"size\"\r\n                      type=\"text\"\r\n                      value={inputSize}\r\n                      onChange={(e) => setInputSize(e.target.value)}\r\n                      onKeyPress={handleKeySize}\r\n                      placeholder=\"Please enter data, separated by commas, then press enter: XL,XX,XS,S,L,SM\"\r\n                      style={{\r\n                        border: \"none\",\r\n                        outline: \"none\",\r\n                        flexGrow: 1,\r\n                        minWidth: \"100px\",\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  <br />\r\n\r\n                  <div className=\"form-group\">\r\n                    <h6>Upload Image</h6>\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      onChange={onChangeImages}\r\n                      className=\"form-control\"\r\n                      multiple\r\n                    />\r\n                    {images !== undefined && (\r\n                      <div\r\n                        className=\"image-list\"\r\n                        style={{ display: \"flex\", flexWrap: \"wrap\" }}\r\n                      >\r\n                        {images.map((image, index) => (\r\n                          <div\r\n                            key={index}\r\n                            className=\"image-item\"\r\n                            style={{ position: \"relative\", margin: 5 }}\r\n                          >\r\n                            <img\r\n                              className=\"img-preview\"\r\n                              style={{ height: 100, width: 100 }}\r\n                              src={image.url}\r\n                              alt={`Image ${index}`}\r\n                            />\r\n                            <Icon\r\n                              component={CloseIcon}\r\n                              sx={{\r\n                                position: \"absolute\",\r\n                                top: 5,\r\n                                right: 5,\r\n                                cursor: \"pointer\",\r\n                              }}\r\n                              onClick={() => handleRemoveImage(index)}\r\n                            />\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"form-group\" id=\"editor-container\">\r\n                    <h6>Depscription</h6>\r\n                    <div style={{ height: \"auto\", marginBottom: \"50px\" }}>\r\n                      <ReactQuill\r\n                        ref={reactQuillRef}\r\n                        theme=\"snow\"\r\n                        style={{ height: \"100%\", width: \"100%\" }}\r\n                        value={description}\r\n                        placeholder=\"Chú ý : Khi thêm youtube thì dùng iframe src=https://www.youtube.com/embed/+ mã trên youtube \"\r\n                        onChange={setDescription}\r\n                        modules={{\r\n                          toolbar: {\r\n                            container: [\r\n                              [{ header: \"1\" }, { header: \"2\" }, { font: [] }],\r\n                              [{ size: [] }],\r\n                              [\r\n                                \"bold\",\r\n                                \"italic\",\r\n                                \"underline\",\r\n                                \"strike\",\r\n                                \"blockquote\",\r\n                              ],\r\n                              [\r\n                                { list: \"ordered\" },\r\n                                { list: \"bullet\" },\r\n                                { indent: \"-1\" },\r\n                                { indent: \"+1\" },\r\n                              ],\r\n                              [\"link\", \"image\", \"video\"],\r\n                              [\"code-block\"],\r\n                              [\"clean\"],\r\n                            ],\r\n                            handlers: {\r\n                              image: imageHandler,\r\n                              video: videoHandler,\r\n                            },\r\n                          },\r\n                          clipboard: {\r\n                            matchVisual: false,\r\n                          },\r\n                        }}\r\n                        formats={[\r\n                          \"header\",\r\n                          \"font\",\r\n                          \"size\",\r\n                          \"bold\",\r\n                          \"italic\",\r\n                          \"underline\",\r\n                          \"strike\",\r\n                          \"blockquote\",\r\n                          \"list\",\r\n                          \"bullet\",\r\n                          \"indent\",\r\n                          \"link\",\r\n                          \"image\",\r\n                          \"video\",\r\n                          \"code-block\",\r\n                        ]}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <br />\r\n\r\n                  <Button type=\"submit\" className=\"btn-blue btn-lg btn-big\">\r\n                    <FaCloudUploadAlt /> &nbsp; UPDATE TO VIEW\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n          <br />\r\n          <div className=\"form-preview-container\">\r\n            <form className=\"form-preview\">\r\n              <h3>HTML Preview depscription:</h3>\r\n              <div\r\n                dangerouslySetInnerHTML={{ __html: decodeHTML(description) }}\r\n              />\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductUpload;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}