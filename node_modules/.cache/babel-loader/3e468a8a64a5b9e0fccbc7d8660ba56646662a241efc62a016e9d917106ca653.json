{"ast":null,"code":"import DashboardBox from\"./components/dashboardBox\";import{HiDotsVertical}from\"react-icons/hi\";import{FaUserCircle}from\"react-icons/fa\";import{IoMdCart}from\"react-icons/io\";import{MdShoppingBag}from\"react-icons/md\";import{GiStarsStack}from\"react-icons/gi\";import Menu from\"@mui/material/Menu\";import MenuItem from\"@mui/material/MenuItem\";import{useCallback,useContext,useEffect,useState}from\"react\";import{IoIosTimer}from\"react-icons/io\";import Button from\"@mui/material/Button\";import{Chart}from\"react-google-charts\";import InputLabel from\"@mui/material/InputLabel\";import FormHelperText from\"@mui/material/FormHelperText\";import FormControl from\"@mui/material/FormControl\";import Select from\"@mui/material/Select\";import Checkbox from\"@mui/material/Checkbox\";import Switch from\"@mui/material/Switch\";import{Link}from\"react-router-dom\";import{FaEye}from\"react-icons/fa\";import{FaPencilAlt}from\"react-icons/fa\";import{MdDelete}from\"react-icons/md\";import Pagination from\"@mui/material/Pagination\";import{AdminContext}from\"../../../App\";import{toast}from\"react-toastify\";import{useNavigate}from'react-router-dom';import{formatVND,truncate,convertToVietnamTime}from\"../../../utils/formart\";import{subDays,subWeeks,subMonths,subYears,isWithinInterval}from\"date-fns\";import Rating from\"@mui/material/Rating\";// import axios from 'axios'\nimport api from\"../../../api/api\";import{baseURL_}from\"../../../utils/env\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const options={backgroundColor:\"transparent\",chartArea:{width:\"100%\",height:\"100%\"},// legend: { position: 'bottom', textStyle: { color: 'white', fontSize: 12 } },\npieHole:0.4,is3D:false};const Dashboard=()=>{const navigate=useNavigate();const[anchorEl,setAnchorEl]=useState(null);const[showBy,setshowBy]=useState(10);// const [userData, setUserData] = useState();\nconst[numberFilterProduct,setNumberFilterProduct]=useState(0);const[numberFilterUser,setnumberFilterUser]=useState(0);const[numberFilterOrder,setnumberFilterOrder]=useState(0);const[product,setProduct]=useState([]);const[bestSell,setBestSell]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[selectAll,setSelectAll]=useState(false);const[checkedItems,setCheckedItems]=useState([]);//admin\nconst[dataUser,setdataUser]=useState([]);const[showUser,setshowUser]=useState(\"\");const[allProduct,setAllProduct]=useState([]);const[totalSales,setTotalSales]=useState();const context=useContext(AdminContext);const id=localStorage.getItem(\"_id\");useEffect(()=>{const shopp=localStorage.getItem(\"shop\");context.setisHideSidebarAndHeader(false);if(!shopp){navigate('/login');}if(context.role===\"admin\"){getAdmin();}else{getDataSeller(id);}window.scrollTo(0,0);},[context,navigate,id]);console.log('context',context);// const data = localStorage.getItem(\"userData\");\nuseEffect(()=>{if(product){handleTimeRangeChange(null);}},[product,id]);useEffect(()=>{if(bestSell.length>0){setTotalPages(Math.ceil(bestSell.length/showBy));}},[bestSell,showBy]);//admin\nuseEffect(()=>{if(showUser){const dataNewsUser=allProduct.filter(item=>item.userId===showUser);console.log(\"showUser\",showUser);setBestSell(dataNewsUser);}else{getAdmin();}},[showUser]);//   console.log(\"context\", context);\nconst indexOfLastProduct=currentPage*showBy;const indexOfFirstProduct=indexOfLastProduct-showBy;const currentProducts=bestSell.slice(indexOfFirstProduct,indexOfLastProduct);const getAdmin=async()=>{try{const user_=JSON.parse(localStorage.getItem(\"user_\"));const res=await api.get(\"\".concat(baseURL_,\"/shose\"));const allData=res.data.data.filter(data=>data.seller);setdataUser(user_);const mapping={};user_.forEach(item=>{mapping[item._id]={email:item.email,deviceToken:item.deviceToken};});const responsiveData=allData.map(item=>({...item,email:mapping[item.userId].email,deviceToken:mapping[item.userId].deviceToken}));const total=responsiveData.reduce((sum,product)=>sum+product.quantity*product.price,0);// console.log('total',total)\nsetTotalSales(total);setAllProduct(responsiveData);setBestSell(responsiveData);setProduct(res.data.data);// console.log(\"dataNewsUser\", responsiveData);\n}catch(error){console.log(\"error\",error);}};const getDataSeller=async id=>{try{const response=await api.get(\"\".concat(baseURL_,\"/auth/user/\").concat(id));if(response.data.status===true){// const data = response.data.data.idProduct;\nconst data=response.data.data.idProduct.filter(i=>i.seller);const total=data.reduce((sum,product)=>sum+product.quantity*product.price,0);setTotalSales(total);setProduct(response.data.data.idProduct);setBestSell(data);}}catch(err){console.log(\"err\",err.response);}};const handleSelectAll=event=>{setSelectAll(event.target.checked);if(event.target.checked){const newCheckedItems=bestSell.map(item=>item._id);setCheckedItems(newCheckedItems);}else{setCheckedItems([]);}};const handleCheckboxChange=(event,id)=>{if(event.target.checked){setCheckedItems([...checkedItems,id]);}else{setCheckedItems(checkedItems.filter(i=>i!==id));}};const handleStatus=async(checked,idStatus)=>{try{const responsive=await api.put(\"\".concat(baseURL_,\"/shose/\").concat(idStatus),{status:checked});if(responsive.data.status===true){toast.success(\"Cập nhật thành công!\");context.role===\"admin\"?getAdmin():getDataSeller(id);}else{toast.error(\"Cập nhật thất bại. Vui lòng thử lại.\");}}catch(error){console.log(\"error\",error);}};const handleSeller=async(checked,idSeller)=>{// console.log(\"checked\", checked);\ntry{const responsive=await api.put(\"\".concat(baseURL_,\"/shose/\").concat(idSeller),{seller:checked});if(responsive.data.status===true){toast.success(\"Cập nhật thành công!\");context.role===\"admin\"?getAdmin():getDataSeller(id);}else{toast.error(\"Cập nhật thất bại. Vui lòng thử lại.\");}}catch(error){console.log(\"error\",error);}};const handleDelete=async idDelete=>{if(window.confirm(\"Bạn có chắc chắn muốn xóa sản phẩm đã chọn không?\")){try{if(checkedItems.length>0){// Nếu có mục nào được chọn, xóa tất cả các mục đó\nconst deletePromises=checkedItems.map(itemId=>api.delete(\"\".concat(baseURL_,\"/shose/\").concat(itemId)));const responses=await Promise.all(deletePromises);const successCount=responses.filter(response=>response.data.status===true).length;const failureCount=responses.length-successCount;if(successCount>0){toast.success(\"\".concat(successCount,\" items deleted successfully!\"));setCheckedItems([]);}if(failureCount>0){toast.error(\"\".concat(failureCount,\" items failed to delete. Please try again.\"));}}else{// Nếu không có mục nào được chọn, xóa mục cụ thể với ID đã truyền vào\nconst response=await api.delete(\"\".concat(baseURL_,\"/shose/\").concat(idDelete));if(response.data.status===true){toast.success(\"Xoá thành công!\");setCheckedItems(checkedItems.filter(itemId=>itemId!==idDelete));// Loại bỏ mục đã xóa khỏi danh sách đã chọn nếu nó tồn tại\n}else{toast.error(\"Cập nhật thất bại. Vui lòng thử lại.\");}}context.role===\"admin\"?getAdmin():getDataSeller(id);}catch(error){console.log(\"error\",error);toast.error(\"An error occurred. Please try again.\");}}};const handleTimeRangeChange=async range=>{const user_=JSON.parse(localStorage.getItem(\"user_\"));const order=await api.get(\"\".concat(baseURL_,\"/order\"));const now=new Date();let startDate;switch(range){case\"lastDay\":startDate=subDays(now,1);break;case\"lastWeek\":startDate=subWeeks(now,1);break;case\"lastMonth\":startDate=subMonths(now,1);break;case\"lastYear\":startDate=subYears(now,1);break;default:startDate=null;break;}// console.log(\"startDate\", startDate)\nif(startDate){const filtered=product.filter(item=>{const itemDate=new Date(item.createdAt);return isWithinInterval(itemDate,{start:startDate,end:now});});const filteredUser=user_.filter(item=>{const itemDate=new Date(item.createdAt);return isWithinInterval(itemDate,{start:startDate,end:now});});const filteredOrder=order.data.data.filter(item=>{const itemDate=new Date(item.createdAt);return isWithinInterval(itemDate,{start:startDate,end:now});});setNumberFilterProduct(filtered.length);setnumberFilterUser(filteredUser.length);setnumberFilterOrder(filteredOrder.length);// console.log('filteredOrder',filteredOrder.length);\n}else{context.role==='admin'&&setnumberFilterUser(user_.length);setnumberFilterOrder(order.data.data.length);;setNumberFilterProduct(product.length);}};const handleClick=event=>{setAnchorEl(event.currentTarget);};const handleClose=()=>{setAnchorEl(null);};const calculateSalesByYear=(products,year)=>{return products.filter(product=>{const productYear=new Date(product.createdAt).getFullYear();return productYear===year;}).reduce((acc,product)=>acc+product.quantity*product.price,0);};const data=[[\"Year\",\"Sales\"],[\"2023\",calculateSalesByYear(bestSell,2023)],[\"2024\",calculateSalesByYear(bestSell,2024)],[\"2025\",calculateSalesByYear(bestSell,2025)],[\"2026\",calculateSalesByYear(bestSell,2026)]];return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"right-content w-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row dashboardBoxWrapperRow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboardBoxWrapper d-flex\",children:[/*#__PURE__*/_jsx(DashboardBox,{color:[\"#1da256\",\"#48d483\"],icon:/*#__PURE__*/_jsx(FaUserCircle,{}),grow:true,data:[\"Users\",\"\".concat(numberFilterUser)],onTimeRangeChange:handleTimeRangeChange}),/*#__PURE__*/_jsx(DashboardBox,{color:[\"#c012e2\",\"#eb64fe\"],icon:/*#__PURE__*/_jsx(IoMdCart,{}),grow:false,data:[\"Orders\",\"\".concat(numberFilterOrder)],onTimeRangeChange:handleTimeRangeChange}),/*#__PURE__*/_jsx(DashboardBox,{color:[\"#2c78e5\",\"#60aff5\"],icon:/*#__PURE__*/_jsx(MdShoppingBag,{}),grow:true,data:[\"Products\",\"\".concat(numberFilterProduct)],onTimeRangeChange:handleTimeRangeChange}),/*#__PURE__*/_jsx(DashboardBox,{color:[\"#e1950e\",\"#f3cd29\"],icon:/*#__PURE__*/_jsx(GiStarsStack,{}),grow:true,data:[\"chua lam\",\"Reviews\"],onTimeRangeChange:handleTimeRangeChange})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 pl-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"box graphBox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center w-100 bottomEle\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"text-white mb-0 mt-0\",children:\"Total Sales\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-white font-weight-bold\",children:formatVND(totalSales)}),/*#__PURE__*/_jsx(Chart,{chartType:\"PieChart\",width:\"100%\",height:\"170px\",data:data,options:options})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow border-0 p-3 mt-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"hd\",children:\"Best Selling Products\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row cardFilters mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"SHOW BY\"}),/*#__PURE__*/_jsx(FormControl,{size:\"small\",className:\"w-100\",children:/*#__PURE__*/_jsxs(Select,{value:showBy,onChange:e=>setshowBy(e.target.value),displayEmpty:true,inputProps:{\"aria-label\":\"Without label\"},labelId:\"demo-select-small-label\",className:\"w-100\",children:[/*#__PURE__*/_jsx(MenuItem,{value:10,children:\"Ten\"}),/*#__PURE__*/_jsx(MenuItem,{value:20,children:\"Twenty\"}),/*#__PURE__*/_jsx(MenuItem,{value:30,children:\"Thirty\"})]})})]}),context.role===\"admin\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"SHOW USER BY\"}),/*#__PURE__*/_jsx(FormControl,{size:\"small\",className:\"w-100\",children:/*#__PURE__*/_jsxs(Select,{value:showUser,onChange:e=>setshowUser(e.target.value),displayEmpty:true,inputProps:{\"aria-label\":\"Without label\"},labelId:\"demo-select-small-label\",className:\"w-100\",MenuProps:{PaperProps:{style:{maxHeight:500,width:250}}},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:/*#__PURE__*/_jsx(\"em\",{children:\"None\"})}),dataUser.length>0&&dataUser.map((i,index)=>/*#__PURE__*/_jsx(MenuItem,{value:i._id,children:i.email},i._id))]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-responsive mt-3\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered table-striped v-align\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Checkbox,{checked:selectAll,onChange:handleSelectAll,inputProps:{\"aria-label\":\"controlled\"},style:{color:\"white\"}})}),/*#__PURE__*/_jsx(\"th\",{children:\"UID\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"300px\"},children:\"PRODUCT\"}),/*#__PURE__*/_jsx(\"th\",{children:\"BRAND\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"RATING\"}),/*#__PURE__*/_jsx(\"th\",{children:\"QUANTITY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"COLOR\"}),/*#__PURE__*/_jsx(\"th\",{children:\"SIZE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DISCOUNT\"}),/*#__PURE__*/_jsx(\"th\",{children:\"FAVORITE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"SELLER\"}),/*#__PURE__*/_jsx(\"th\",{children:\"STATUS\"}),/*#__PURE__*/_jsx(\"th\",{children:\"TIME CREATE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"TIME UPDATE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ACTION\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:currentProducts!==undefined&&currentProducts.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center\",children:/*#__PURE__*/_jsx(Checkbox,{checked:checkedItems.includes(item._id),onChange:e=>handleCheckboxChange(e,item._id),inputProps:{\"aria-label\":\"controlled\"},color:\"success\"})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{children:index})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center productBox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"imgWrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"img card shadow m-0\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(baseURL_,\"/resize?url=\").concat(item.imageUrl,\"&width=100&height=100\"),className:\"w-100\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"info pl-3\",children:[/*#__PURE__*/_jsx(\"h6\",{children:truncate(item.name,20)}),/*#__PURE__*/_jsx(\"p\",{children:truncate(item.description,20)})]})]})}),/*#__PURE__*/_jsx(\"td\",{children:item.brand}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"del\",{className:\"old\",children:formatVND(item.price)}),/*#__PURE__*/_jsx(\"span\",{className:\"new text-danger\",children:formatVND(item.price-item.price*(item.discount/100))})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Rating,{name:\"read-only\",defaultValue:item.star,precision:0.5,size:\"small\",readOnly:true})}),/*#__PURE__*/_jsx(\"td\",{children:item.quantity}),/*#__PURE__*/_jsx(\"td\",{children:item.color.map(items=>/*#__PURE__*/_jsx(\"span\",{className:\"new text-danger\",children:items}))}),/*#__PURE__*/_jsx(\"td\",{children:item.size.map(items=>/*#__PURE__*/_jsx(\"span\",{className:\"new text-danger\",children:items}))}),/*#__PURE__*/_jsxs(\"td\",{children:[item.discount,\"%\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"new text-danger\",children:item.favorite?\"Có\":\"Không\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Switch,{color:\"success\",checked:item.seller?true:false,onChange:event=>{handleSeller(event.target.checked,item._id);},inputProps:{\"aria-label\":\"controlled\"}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Switch,{color:\"success\",checked:item.status?true:false,onChange:event=>{handleStatus(event.target.checked,item._id);},inputProps:{\"aria-label\":\"controlled\"}})}),/*#__PURE__*/_jsx(\"td\",{children:convertToVietnamTime(item.createdAt)}),/*#__PURE__*/_jsx(\"td\",{children:convertToVietnamTime(item.updatedAt)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"actions d-flex align-items-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/product/details/\".concat(item._id),children:/*#__PURE__*/_jsx(Button,{className:\"secondary\",color:\"secondary\",children:/*#__PURE__*/_jsx(FaEye,{})})}),/*#__PURE__*/_jsx(Link,{to:\"/product/upload/\".concat(item._id),children:/*#__PURE__*/_jsx(Button,{className:\"success\",color:\"success\",children:/*#__PURE__*/_jsx(FaPencilAlt,{})})}),context.role===\"admin\"&&/*#__PURE__*/_jsx(Button,{className:\"error\",color:\"error\",onClick:()=>handleDelete(item._id),children:/*#__PURE__*/_jsx(MdDelete,{})})]})})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex tableFooter\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Showing \",/*#__PURE__*/_jsx(\"b\",{children:currentProducts.length}),\" of\",\" \",/*#__PURE__*/_jsx(\"b\",{children:bestSell.length}),\" results\"]}),/*#__PURE__*/_jsx(Pagination,{count:totalPages,page:currentPage,onChange:(event,value)=>setCurrentPage(value),color:\"primary\",className:\"pagination\",showFirstButton:true,showLastButton:true})]})]})]})]})});};export default Dashboard;","map":{"version":3,"names":["DashboardBox","HiDotsVertical","FaUserCircle","IoMdCart","MdShoppingBag","GiStarsStack","Menu","MenuItem","useCallback","useContext","useEffect","useState","IoIosTimer","Button","Chart","InputLabel","FormHelperText","FormControl","Select","Checkbox","Switch","Link","FaEye","FaPencilAlt","MdDelete","Pagination","AdminContext","toast","useNavigate","formatVND","truncate","convertToVietnamTime","subDays","subWeeks","subMonths","subYears","isWithinInterval","Rating","api","baseURL_","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","options","backgroundColor","chartArea","width","height","pieHole","is3D","Dashboard","navigate","anchorEl","setAnchorEl","showBy","setshowBy","numberFilterProduct","setNumberFilterProduct","numberFilterUser","setnumberFilterUser","numberFilterOrder","setnumberFilterOrder","product","setProduct","bestSell","setBestSell","currentPage","setCurrentPage","totalPages","setTotalPages","selectAll","setSelectAll","checkedItems","setCheckedItems","dataUser","setdataUser","showUser","setshowUser","allProduct","setAllProduct","totalSales","setTotalSales","context","id","localStorage","getItem","shopp","setisHideSidebarAndHeader","role","getAdmin","getDataSeller","window","scrollTo","console","log","handleTimeRangeChange","length","Math","ceil","dataNewsUser","filter","item","userId","indexOfLastProduct","indexOfFirstProduct","currentProducts","slice","user_","JSON","parse","res","get","concat","allData","data","seller","mapping","forEach","_id","email","deviceToken","responsiveData","map","total","reduce","sum","quantity","price","error","response","status","idProduct","i","err","handleSelectAll","event","target","checked","newCheckedItems","handleCheckboxChange","handleStatus","idStatus","responsive","put","success","handleSeller","idSeller","handleDelete","idDelete","confirm","deletePromises","itemId","delete","responses","Promise","all","successCount","failureCount","range","order","now","Date","startDate","filtered","itemDate","createdAt","start","end","filteredUser","filteredOrder","handleClick","currentTarget","handleClose","calculateSalesByYear","products","year","productYear","getFullYear","acc","children","className","color","icon","grow","onTimeRangeChange","chartType","size","value","onChange","e","displayEmpty","inputProps","labelId","MenuProps","PaperProps","style","maxHeight","index","undefined","includes","src","imageUrl","name","description","brand","discount","defaultValue","star","precision","readOnly","items","favorite","updatedAt","to","onClick","count","page","showFirstButton","showLastButton"],"sources":["/Users/trinhdai/DATA/React_Native/BigShose2/client/website/src/components/admin/Dashboard/index.js"],"sourcesContent":["import DashboardBox from \"./components/dashboardBox\";\r\nimport { HiDotsVertical } from \"react-icons/hi\";\r\nimport { FaUserCircle } from \"react-icons/fa\";\r\nimport { IoMdCart } from \"react-icons/io\";\r\nimport { MdShoppingBag } from \"react-icons/md\";\r\nimport { GiStarsStack } from \"react-icons/gi\";\r\nimport Menu from \"@mui/material/Menu\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport { IoIosTimer } from \"react-icons/io\";\r\nimport Button from \"@mui/material/Button\";\r\nimport { Chart } from \"react-google-charts\";\r\n\r\nimport InputLabel from \"@mui/material/InputLabel\";\r\nimport FormHelperText from \"@mui/material/FormHelperText\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport Select from \"@mui/material/Select\";\r\n\r\nimport Checkbox from \"@mui/material/Checkbox\";\r\nimport Switch from \"@mui/material/Switch\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { FaEye } from \"react-icons/fa\";\r\nimport { FaPencilAlt } from \"react-icons/fa\";\r\nimport { MdDelete } from \"react-icons/md\";\r\nimport Pagination from \"@mui/material/Pagination\";\r\nimport { AdminContext } from \"../../../App\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nimport { formatVND, truncate,convertToVietnamTime } from \"../../../utils/formart\";\r\n\r\nimport {\r\n  subDays,\r\n  subWeeks,\r\n  subMonths,\r\n  subYears,\r\n  isWithinInterval,\r\n} from \"date-fns\";\r\n\r\nimport Rating from \"@mui/material/Rating\";\r\n// import axios from 'axios'\r\nimport api from \"../../../api/api\";\r\nimport { baseURL_ } from \"../../../utils/env\";\r\n\r\nexport const options = {\r\n  backgroundColor: \"transparent\",\r\n  chartArea: { width: \"100%\", height: \"100%\" },\r\n  // legend: { position: 'bottom', textStyle: { color: 'white', fontSize: 12 } },\r\n  pieHole: 0.4,\r\n  is3D: false,\r\n};\r\n\r\nconst Dashboard = () => {\r\n  const navigate = useNavigate();\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [showBy, setshowBy] = useState(10);\r\n  // const [userData, setUserData] = useState();\r\n  const [numberFilterProduct, setNumberFilterProduct] = useState(0);\r\n  const [numberFilterUser, setnumberFilterUser] = useState(0);\r\n  const [numberFilterOrder, setnumberFilterOrder] = useState(0);\r\n\r\n  const [product, setProduct] = useState([]);\r\n  const [bestSell, setBestSell] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [checkedItems, setCheckedItems] = useState([]);\r\n  //admin\r\n  const [dataUser, setdataUser] = useState([]);\r\n  const [showUser, setshowUser] = useState(\"\");\r\n  const [allProduct, setAllProduct] = useState([]);\r\n  const [totalSales, setTotalSales] = useState();\r\n\r\n  const context = useContext(AdminContext);\r\n  const id = localStorage.getItem(\"_id\");\r\n\r\n\r\n  useEffect(() => {\r\n    const shopp = localStorage.getItem(\"shop\");\r\n\r\n    context.setisHideSidebarAndHeader(false);\r\n    if (!shopp) {\r\n      navigate('/login');\r\n    }\r\n    if (context.role === \"admin\") {\r\n      getAdmin();\r\n    } else {\r\n      getDataSeller(id);\r\n    }\r\n    window.scrollTo(0, 0);\r\n  }, [context, navigate,id]);\r\nconsole.log('context',context)\r\n  // const data = localStorage.getItem(\"userData\");\r\n\r\n  useEffect(() => {\r\n    if (product) {\r\n      handleTimeRangeChange(null);\r\n    }\r\n  }, [product, id]);\r\n\r\n  useEffect(() => {\r\n    if (bestSell.length > 0) {\r\n      setTotalPages(Math.ceil(bestSell.length / showBy));\r\n    }\r\n  }, [bestSell, showBy]);\r\n  //admin\r\n  useEffect(() => {\r\n    if (showUser) {\r\n      const dataNewsUser = allProduct.filter(\r\n        (item) => item.userId === showUser\r\n      );\r\n      console.log(\"showUser\", showUser);\r\n      setBestSell(dataNewsUser);\r\n    } else {\r\n      getAdmin();\r\n    }\r\n  }, [showUser]);\r\n  //   console.log(\"context\", context);\r\n\r\n  const indexOfLastProduct = currentPage * showBy;\r\n  const indexOfFirstProduct = indexOfLastProduct - showBy;\r\n\r\n  const currentProducts = bestSell.slice(\r\n    indexOfFirstProduct,\r\n    indexOfLastProduct\r\n  );\r\n\r\n\r\n  const getAdmin = async () => {\r\n    try {\r\n      const user_ = JSON.parse(localStorage.getItem(\"user_\"));\r\n      const res = await api.get(`${baseURL_}/shose`);\r\n      const allData = res.data.data.filter(data => data.seller);\r\n      setdataUser(user_);\r\n      const mapping = {};\r\n      user_.forEach((item) => {\r\n        mapping[item._id] = {\r\n          email: item.email,\r\n          deviceToken: item.deviceToken,\r\n        };\r\n      });\r\n      const responsiveData = allData.map((item) => ({\r\n        ...item,\r\n        email: mapping[item.userId].email,\r\n        deviceToken: mapping[item.userId].deviceToken,\r\n      }));\r\n      const total = responsiveData.reduce((sum, product) => sum + product.quantity * product.price, 0);\r\n      // console.log('total',total)\r\n      setTotalSales(total)\r\n\r\n      setAllProduct(responsiveData);\r\n      setBestSell(responsiveData);\r\n      setProduct(res.data.data)\r\n      // console.log(\"dataNewsUser\", responsiveData);\r\n    } catch (error) {\r\n      console.log(\"error\", error);\r\n    }\r\n  };\r\n\r\n  const getDataSeller = async (id) => {\r\n    try {\r\n      const response = await api.get(`${baseURL_}/auth/user/${id}`);\r\n      if (response.data.status === true) {\r\n        // const data = response.data.data.idProduct;\r\n        const data = response.data.data.idProduct.filter((i) => i.seller);\r\n         const total = data.reduce((sum, product) => sum + product.quantity * product.price, 0);\r\n\r\n        setTotalSales(total)\r\n        setProduct(response.data.data.idProduct);\r\n        setBestSell(data);\r\n      }\r\n    } catch (err) {\r\n      console.log(\"err\", err.response);\r\n    }\r\n  };\r\n\r\n  const handleSelectAll = (event) => {\r\n    setSelectAll(event.target.checked);\r\n    if (event.target.checked) {\r\n      const newCheckedItems = bestSell.map((item) => item._id);\r\n      setCheckedItems(newCheckedItems);\r\n    } else {\r\n      setCheckedItems([]);\r\n    }\r\n  };\r\n\r\n  const handleCheckboxChange = (event, id) => {\r\n    if (event.target.checked) {\r\n      setCheckedItems([...checkedItems, id]);\r\n    } else {\r\n      setCheckedItems(checkedItems.filter((i) => i !== id));\r\n    }\r\n  };\r\n\r\n  const handleStatus = async (checked, idStatus) => {\r\n    try {\r\n      const responsive = await api.put(\r\n        `${baseURL_}/shose/${idStatus}`,\r\n        { status: checked }\r\n      );\r\n      if (responsive.data.status === true) {\r\n        toast.success(\"Cập nhật thành công!\");\r\n        context.role === \"admin\"?getAdmin():getDataSeller(id)\r\n      } else {\r\n        toast.error(\"Cập nhật thất bại. Vui lòng thử lại.\");\r\n      }\r\n    } catch (error) {\r\n      console.log(\"error\", error);\r\n    }\r\n  };\r\n  const handleSeller = async (checked, idSeller) => {\r\n    // console.log(\"checked\", checked);\r\n    try {\r\n      const responsive = await api.put(\r\n        `${baseURL_}/shose/${idSeller}`,\r\n        { seller: checked }\r\n      );\r\n      if (responsive.data.status === true) {\r\n        toast.success(\"Cập nhật thành công!\");\r\n        context.role === \"admin\"?getAdmin():getDataSeller(id)\r\n\r\n      } else {\r\n        toast.error(\"Cập nhật thất bại. Vui lòng thử lại.\");\r\n      }\r\n    } catch (error) {\r\n      console.log(\"error\", error);\r\n    }\r\n  };\r\n  const handleDelete = async (idDelete) => {\r\n    if (window.confirm(\"Bạn có chắc chắn muốn xóa sản phẩm đã chọn không?\")) {\r\n        try {\r\n            if (checkedItems.length > 0) {\r\n                // Nếu có mục nào được chọn, xóa tất cả các mục đó\r\n                const deletePromises = checkedItems.map((itemId) =>\r\n                    api.delete(`${baseURL_}/shose/${itemId}`)\r\n                );\r\n                const responses = await Promise.all(deletePromises);\r\n\r\n                const successCount = responses.filter((response) => response.data.status === true).length;\r\n                const failureCount = responses.length - successCount;\r\n\r\n                if (successCount > 0) {\r\n                    toast.success(`${successCount} items deleted successfully!`);\r\n                    setCheckedItems([]);\r\n                }\r\n\r\n                if (failureCount > 0) {\r\n                    toast.error(`${failureCount} items failed to delete. Please try again.`);\r\n                }\r\n            } else {\r\n                // Nếu không có mục nào được chọn, xóa mục cụ thể với ID đã truyền vào\r\n                const response = await api.delete(`${baseURL_}/shose/${idDelete}`);\r\n\r\n                if (response.data.status === true) {\r\n                    toast.success(\"Xoá thành công!\");\r\n                    setCheckedItems(checkedItems.filter((itemId) => itemId !== idDelete)); // Loại bỏ mục đã xóa khỏi danh sách đã chọn nếu nó tồn tại\r\n                } else {\r\n                    toast.error(\"Cập nhật thất bại. Vui lòng thử lại.\");\r\n                }\r\n            }\r\n            context.role === \"admin\"?getAdmin():getDataSeller(id)\r\n        } catch (error) {\r\n            console.log(\"error\", error);\r\n            toast.error(\"An error occurred. Please try again.\");\r\n        }\r\n    }\r\n};\r\n\r\n  const handleTimeRangeChange =async (range) => {\r\n    const user_ = JSON.parse(localStorage.getItem(\"user_\"));\r\n    const order = await api.get(`${baseURL_}/order`);\r\n    const now = new Date();\r\n    let startDate;\r\n    switch (range) {\r\n      case \"lastDay\":\r\n        startDate = subDays(now, 1);\r\n        break;\r\n      case \"lastWeek\":\r\n        startDate = subWeeks(now, 1);\r\n        break;\r\n      case \"lastMonth\":\r\n        startDate = subMonths(now, 1);\r\n        break;\r\n      case \"lastYear\":\r\n        startDate = subYears(now, 1);\r\n        break;\r\n      default:\r\n        startDate = null;\r\n        break;\r\n    }\r\n    // console.log(\"startDate\", startDate)\r\n    if (startDate) {\r\n      const filtered = product.filter((item) => {\r\n        const itemDate = new Date(item.createdAt);\r\n        return isWithinInterval(itemDate, { start: startDate, end: now });\r\n      });\r\n      const filteredUser = user_.filter((item) => {\r\n        const itemDate = new Date(item.createdAt);\r\n        return isWithinInterval(itemDate, { start: startDate, end: now });\r\n      });\r\n      const filteredOrder = order.data.data.filter((item) => {\r\n        const itemDate = new Date(item.createdAt);\r\n        return isWithinInterval(itemDate, { start: startDate, end: now });\r\n      });\r\n      setNumberFilterProduct(filtered.length);\r\n      setnumberFilterUser(filteredUser.length);\r\n      setnumberFilterOrder(filteredOrder.length);\r\n      // console.log('filteredOrder',filteredOrder.length);\r\n    } else {\r\n      context.role==='admin'&&setnumberFilterUser(user_.length);setnumberFilterOrder(order.data.data.length);;\r\n      setNumberFilterProduct(product.length);\r\n    }\r\n  };\r\n \r\n\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  const calculateSalesByYear = (products, year) => {\r\n    return products\r\n      .filter(product => {\r\n        const productYear = new Date(product.createdAt).getFullYear();\r\n        return productYear === year;\r\n      })\r\n      .reduce((acc, product) => acc + product.quantity * product.price, 0);\r\n  };\r\n  const data = [\r\n    [\"Year\", \"Sales\"],\r\n    [\"2023\", calculateSalesByYear(bestSell,2023)],\r\n    [\"2024\", calculateSalesByYear(bestSell,2024)],\r\n    [\"2025\", calculateSalesByYear(bestSell,2025)],\r\n    [\"2026\", calculateSalesByYear(bestSell,2026)],\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <div className=\"right-content w-100\">\r\n        <div className=\"row dashboardBoxWrapperRow\">\r\n          <div className=\"col-md-8\">\r\n            <div className=\"dashboardBoxWrapper d-flex\">\r\n              <DashboardBox\r\n                color={[\"#1da256\", \"#48d483\"]}\r\n                icon={<FaUserCircle />}\r\n                grow={true}\r\n                data={[\"Users\", `${numberFilterUser}`]}\r\n                onTimeRangeChange={handleTimeRangeChange}\r\n              />\r\n              <DashboardBox\r\n                color={[\"#c012e2\", \"#eb64fe\"]}\r\n                icon={<IoMdCart />}\r\n                grow={false}\r\n                data={[\"Orders\", `${numberFilterOrder}`]}\r\n                onTimeRangeChange={handleTimeRangeChange}\r\n              />\r\n              <DashboardBox\r\n                color={[\"#2c78e5\", \"#60aff5\"]}\r\n                icon={<MdShoppingBag />}\r\n                grow={true}\r\n                data={[\"Products\", `${numberFilterProduct}`]}\r\n                onTimeRangeChange={handleTimeRangeChange}\r\n              />\r\n              <DashboardBox\r\n                color={[\"#e1950e\", \"#f3cd29\"]}\r\n                icon={<GiStarsStack />}\r\n                grow={true}\r\n                data={[\"chua lam\", \"Reviews\"]}\r\n                onTimeRangeChange={handleTimeRangeChange}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-4 pl-0\">\r\n            <div className=\"box graphBox\">\r\n              <div className=\"d-flex align-items-center w-100 bottomEle\">\r\n                <h6 className=\"text-white mb-0 mt-0\">Total Sales</h6>\r\n                {/* <div className=\"ml-auto\">\r\n                  <Button className=\"ml-auto toggleIcon\" onClick={handleClick}>\r\n                    <HiDotsVertical />\r\n                  </Button>\r\n                  <Menu\r\n                    className=\"dropdown_menu\"\r\n                    MenuListProps={{\r\n                      \"aria-labelledby\": \"long-button\",\r\n                    }}\r\n                    anchorEl={anchorEl}\r\n                    open={open}\r\n                    onClose={handleClose}\r\n                    PaperProps={{\r\n                      style: {\r\n                        maxHeight: ITEM_HEIGHT * 4.5,\r\n                        width: \"20ch\",\r\n                      },\r\n                    }}\r\n                  >\r\n                    <MenuItem onClick={handleClose}>\r\n                      <IoIosTimer /> Last Day\r\n                    </MenuItem>\r\n                    <MenuItem onClick={handleClose}>\r\n                      <IoIosTimer /> Last Week\r\n                    </MenuItem>\r\n                    <MenuItem onClick={handleClose}>\r\n                      <IoIosTimer /> Last Month\r\n                    </MenuItem>\r\n                    <MenuItem onClick={handleClose}>\r\n                      <IoIosTimer /> Last Year\r\n                    </MenuItem>\r\n                  </Menu>\r\n                </div> */}\r\n              </div>\r\n\r\n              <h3 className=\"text-white font-weight-bold\">{formatVND(totalSales)}</h3>\r\n              {/* <p>{formatVND(totalSales)} in last month</p> */}\r\n\r\n              <Chart\r\n                chartType=\"PieChart\"\r\n                width=\"100%\"\r\n                height=\"170px\"\r\n                data={data}\r\n                options={options}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"card shadow border-0 p-3 mt-4\">\r\n          <h3 className=\"hd\">Best Selling Products</h3>\r\n\r\n          <div className=\"row cardFilters mt-3\">\r\n            <div className=\"col-md-3\">\r\n              <h4>SHOW BY</h4>\r\n              <FormControl size=\"small\" className=\"w-100\">\r\n                <Select\r\n                  value={showBy}\r\n                  onChange={(e) => setshowBy(e.target.value)}\r\n                  displayEmpty\r\n                  inputProps={{ \"aria-label\": \"Without label\" }}\r\n                  labelId=\"demo-select-small-label\"\r\n                  className=\"w-100\"\r\n                >\r\n                  <MenuItem value={10}>Ten</MenuItem>\r\n                  <MenuItem value={20}>Twenty</MenuItem>\r\n                  <MenuItem value={30}>Thirty</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </div>\r\n            {context.role === \"admin\" && (\r\n                <div className=\"col-md-3\">\r\n                  <h4>SHOW USER BY</h4>\r\n                  <FormControl size=\"small\" className=\"w-100\">\r\n                    <Select\r\n                      value={showUser}\r\n                      onChange={(e) => setshowUser(e.target.value)}\r\n                      displayEmpty\r\n                      inputProps={{ \"aria-label\": \"Without label\" }}\r\n                      labelId=\"demo-select-small-label\"\r\n                      className=\"w-100\"\r\n                      MenuProps={{\r\n                        PaperProps: {\r\n                          style: {\r\n                            maxHeight: 500,\r\n                            width: 250,\r\n                          },\r\n                        },\r\n                      }}\r\n                    >\r\n                      <MenuItem value=\"\">\r\n                        <em>None</em>\r\n                      </MenuItem>\r\n                      {dataUser.length > 0 &&\r\n                        dataUser.map((i, index) => (\r\n                          <MenuItem key={i._id} value={i._id}>\r\n                            {i.email}\r\n                          </MenuItem>\r\n                        ))}\r\n                    </Select>\r\n                  </FormControl>\r\n                </div>\r\n              )}\r\n          </div>\r\n\r\n          <div className=\"table-responsive mt-3\">\r\n            <table className=\"table table-bordered table-striped v-align\">\r\n              <thead className=\"thead-dark\">\r\n                <tr>\r\n                  <th>\r\n                    <Checkbox\r\n                      checked={selectAll}\r\n                      onChange={handleSelectAll}\r\n                      inputProps={{ \"aria-label\": \"controlled\" }}\r\n                      style={{ color: \"white\" }}\r\n                    />\r\n                  </th>\r\n                  <th>UID</th>\r\n                  <th style={{ width: \"300px\" }}>PRODUCT</th>\r\n                  <th>BRAND</th>\r\n                  <th>PRICE</th>\r\n                  <th>RATING</th>\r\n                  <th>QUANTITY</th>\r\n                  <th>COLOR</th>\r\n                  <th>SIZE</th>\r\n                  <th>DISCOUNT</th>\r\n                  <th>FAVORITE</th>\r\n                  <th>SELLER</th>\r\n                  <th>STATUS</th>\r\n                  <th>TIME CREATE</th>\r\n                  <th>TIME UPDATE</th>\r\n                  <th>ACTION</th>\r\n                </tr>\r\n              </thead>\r\n\r\n              <tbody>\r\n                {currentProducts !== undefined &&\r\n                  currentProducts.map((item, index) => (\r\n                    <tr key={index}>\r\n                      <td>\r\n                        <div className=\"d-flex align-items-center\">\r\n                          <Checkbox\r\n                            checked={checkedItems.includes(item._id)}\r\n                            onChange={(e) => handleCheckboxChange(e, item._id)}\r\n                            inputProps={{ \"aria-label\": \"controlled\" }}\r\n                            color=\"success\"\r\n                          />\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <span>{index}</span>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"d-flex align-items-center productBox\">\r\n                          <div className=\"imgWrapper\">\r\n                            <div className=\"img card shadow m-0\">\r\n                              <img\r\n                                src={`${baseURL_}/resize?url=${item.imageUrl}&width=100&height=100`}\r\n                                className=\"w-100\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"info pl-3\">\r\n                            <h6>{truncate(item.name, 20)}</h6>\r\n                            <p>{truncate(item.description, 20)}</p>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n\r\n                      <td>{item.brand}</td>\r\n                      <td>\r\n                        <div>\r\n                          <del className=\"old\">{formatVND(item.price)}</del>\r\n                          <span className=\"new text-danger\">\r\n                            {formatVND(\r\n                              item.price - item.price * (item.discount / 100)\r\n                            )}\r\n                          </span>\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <Rating\r\n                          name=\"read-only\"\r\n                          defaultValue={item.star}\r\n                          precision={0.5}\r\n                          size=\"small\"\r\n                          readOnly\r\n                        />\r\n                      </td>\r\n                      <td>{item.quantity}</td>\r\n                      <td>\r\n                        {item.color.map((items) => (\r\n                          <span className=\"new text-danger\">{items}</span>\r\n                        ))}\r\n                      </td>\r\n                      <td>\r\n                        {item.size.map((items) => (\r\n                          <span className=\"new text-danger\">{items}</span>\r\n                        ))}\r\n                      </td>\r\n                      <td>{item.discount}%</td>\r\n                      <td>\r\n                        <span className=\"new text-danger\">\r\n                          {item.favorite ? \"Có\" : \"Không\"}\r\n                        </span>\r\n                      </td>\r\n                      <td>\r\n                        <Switch\r\n                          color=\"success\"\r\n                          checked={item.seller ? true : false}\r\n                          onChange={(event) => {\r\n                            handleSeller(event.target.checked, item._id);\r\n                          }}\r\n                          inputProps={{ \"aria-label\": \"controlled\" }}\r\n                        />\r\n                      </td>\r\n                      <td>\r\n                        <Switch\r\n                          color=\"success\"\r\n                          checked={item.status ? true : false}\r\n                          onChange={(event) => {\r\n                            handleStatus(event.target.checked, item._id);\r\n                          }}\r\n                          inputProps={{ \"aria-label\": \"controlled\" }}\r\n                        />\r\n                      </td>\r\n                      <td>{convertToVietnamTime(item.createdAt)}</td>\r\n                      <td>{convertToVietnamTime(item.updatedAt)}</td>\r\n                      <td>\r\n                        <div className=\"actions d-flex align-items-center\">\r\n                          <Link to={`/product/details/${item._id}`}>\r\n                            <Button className=\"secondary\" color=\"secondary\">\r\n                              <FaEye />\r\n                            </Button>\r\n                          </Link>\r\n                          <Link to={`/product/upload/${item._id}`}>\r\n                            <Button className=\"success\" color=\"success\">\r\n                              <FaPencilAlt />\r\n                            </Button>\r\n                          </Link>\r\n                          {context.role === \"admin\" && (\r\n                              <Button\r\n                                className=\"error\"\r\n                                color=\"error\"\r\n                                onClick={() => handleDelete(item._id)}\r\n                              >\r\n                                <MdDelete />\r\n                              </Button>\r\n                            )}\r\n                         \r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n              </tbody>\r\n            </table>\r\n            <div className=\"d-flex tableFooter\">\r\n              <p>\r\n                Showing <b>{currentProducts.length}</b> of{\" \"}\r\n                <b>{bestSell.length}</b> results\r\n              </p>\r\n              <Pagination\r\n                count={totalPages}\r\n                page={currentPage}\r\n                onChange={(event, value) => setCurrentPage(value)}\r\n                color=\"primary\"\r\n                className=\"pagination\"\r\n                showFirstButton\r\n                showLastButton\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}