{"ast":null,"code":"var _jsxFileName = \"/Users/trinhdai/DATA/React_Native/BigShose2/client/website/src/components/admin/Notifications/Add.js\",\n  _s = $RefreshSig$();\nimport Breadcrumbs from \"@mui/material/Breadcrumbs\";\nimport HomeIcon from \"@mui/icons-material/Home\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport { emphasize, styled } from \"@mui/material/styles\";\nimport Chip from \"@mui/material/Chip\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Select from \"@mui/material/Select\";\nimport React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport Rating from \"@mui/material/Rating\";\nimport { FaCloudUploadAlt } from \"react-icons/fa\";\nimport { Icon } from \"@mui/material\";\nimport Button from \"@mui/material/Button\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport api from \"../../../api/api\";\nimport { useParams } from \"react-router-dom\";\n// import { htmlToMarkdown } from 'html-to-markdown';\nimport TurndownService from \"turndown\";\nimport Loading from \"../../../components/loading\";\nimport Checkbox from \"@mui/material/Checkbox\";\nimport ReactQuill from \"react-quill\";\nimport \"react-quill/dist/quill.snow.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport { normalizeFileName, convertToWords } from \"../../../utils/formart\";\nimport { red } from \"@mui/material/colors\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\n//breadcrumb code\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StyledBreadcrumb = styled(Chip)(({\n  theme\n}) => {\n  const backgroundColor = theme.palette.mode === \"light\" ? theme.palette.grey[100] : theme.palette.grey[800];\n  return {\n    backgroundColor,\n    height: theme.spacing(3),\n    color: theme.palette.text.primary,\n    fontWeight: theme.typography.fontWeightRegular,\n    \"&:hover, &:focus\": {\n      backgroundColor: emphasize(backgroundColor, 0.06)\n    },\n    \"&:active\": {\n      boxShadow: theme.shadows[1],\n      backgroundColor: emphasize(backgroundColor, 0.12)\n    }\n  };\n});\n_c = StyledBreadcrumb;\nconst NotificationAdd = ({\n  history\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const reactQuillRef = useRef();\n  const [fileExcel, setFileExcel] = useState(null);\n  const [title, setTitle] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [images, setImages] = useState();\n  const [scheduleTime, setScheduleTime] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n  const [dataDeviceToken, setdataDeviceToken] = useState();\n  const [AllDevices, setAllDevices] = useState([]);\n  const dataDevice = [\"android\", \"ios\", \"websites\"];\n  const [selectAll, setSelectAll] = useState(true);\n  const [selectEmailOnly, setSelectEmailOnly] = useState(false);\n  const [selectDevice, setSelectDevice] = useState(false);\n  const [selectedNotificationOption, setSelectedNotificationOption] = useState([]);\n  const url = \"http://192.168.10.110:6969/v1\";\n  const UrlIMG = \"http://192.168.10.110:6969/v1/resize?url=\";\n  const currentTime = new Date();\n\n  // const id = \"661256cbb03b0c689798ad33\";\n  // const email = \"account8@gmail.com\";\n\n  const data = localStorage.getItem(\"userData\");\n  const id = localStorage.getItem(\"_id\");\n  console.log('data.email', data.email);\n  // useEffect(() => {\n  //   if (data) {\n  //     setdataUser(JSON.parse(data));\n  //   }\n  // }, [id]);\n\n  useEffect(() => {\n    getDeviceToken();\n  }, [id]);\n  const upfile = async () => {\n    const formData = new FormData();\n    formData.append(\"files\", images);\n    try {\n      const response = await api.post(`${url}/uploads`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      toast.success(response.data.message);\n      return response.status;\n    } catch (error) {\n      // console.log(error)\n      if (error.response) {\n        const errorMessage = error.response.data.error;\n        toast.error(errorMessage);\n      } else {\n        toast.error(\"Something went wrong\");\n      }\n    }\n  };\n  const submitForm = async e => {\n    e.preventDefault();\n    if (title === \"\" || body === \"\") {\n      toast.error(\"Please input title,body enter\");\n    }\n    if (id) {\n      toast.error(\"Id not found\");\n    }\n    try {\n      // setIsLoading(true);\n      const jsonData = {\n        userId: id,\n        title: title,\n        body: body\n      };\n      if (selectAll) {\n        jsonData.tokens = selectedNotificationOption;\n      }\n      if (selectEmailOnly) {\n        if (selectedNotificationOption.length > 1) {\n          jsonData.tokens = selectedNotificationOption;\n        } else {\n          jsonData.token = selectedNotificationOption.join(\",\");\n        }\n      }\n      if (selectDevice) {\n        jsonData.topic = selectedNotificationOption.join(\",\");\n      }\n      if (images) {\n        const file = await upfile();\n        console.log(file);\n        // if(file===200){\n        jsonData.imageUrl = UrlIMG + images.name + \"&width=1000&height=1000\";\n        // }\n      }\n      scheduleTime ? jsonData.scheduleTime = scheduleTime : jsonData.scheduleTime = new Date(currentTime.getTime() + 1 * 60000);\n      console.log(\"jsonData\", jsonData);\n      // setIsLoading(false);\n\n      const response = await api.post(`${url}/notification/news`, jsonData, {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      if (response.status === 200) {\n        toast.success(response.data.message);\n        // navigate(\"/notification\");\n      }\n      // else {\n      //   toast.error(response.data.message);\n      // }\n      console.log(response);\n    } catch (error) {\n      console.error(\"Cấu hình lỗi:\", error.response);\n      toast.error(error.response.data.error);\n      setIsLoading(false);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const getDeviceToken = async () => {\n    try {\n      const response = await api.get(`${url}/notification/devicetoken`);\n      setdataDeviceToken(response.data);\n      const AllDevices = response.data.reduce((all, device) => {\n        return all.concat(device.deviceToken);\n      }, []);\n      setAllDevices(AllDevices);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  console.log(\"scheduleTime\", scheduleTime);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isLoading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"right-content w-100\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card shadow border-0 w-100 flex-row p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"mb-0\",\n          children: \"Notification Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Breadcrumbs, {\n          \"aria-label\": \"breadcrumb\",\n          className: \"ml-auto breadcrumbs_\",\n          children: [/*#__PURE__*/_jsxDEV(StyledBreadcrumb, {\n            component: \"a\",\n            href: \"/admin/dashboard\",\n            label: \"Dashboard\",\n            icon: /*#__PURE__*/_jsxDEV(HomeIcon, {\n              fontSize: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(StyledBreadcrumb, {\n            component: \"a\",\n            label: \"Notification\",\n            href: \"/admin/notification/\",\n            deleteIcon: /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(StyledBreadcrumb, {\n            label: \"Notification Add\",\n            deleteIcon: /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row22\",\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"form\",\n          onSubmit: submitForm,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card p-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  className: \"mb-4\",\n                  children: \"Notification Information\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n                      checked: selectAll,\n                      onChange: event => (setSelectAll(event.target.checked), setSelectedNotificationOption(AllDevices), setSelectEmailOnly(false), setSelectDevice(false)),\n                      inputProps: {\n                        \"aria-label\": \"controlled\"\n                      },\n                      style: {\n                        color: \"red\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 234,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"All\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 245,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n                      checked: selectEmailOnly,\n                      onChange: event => (setSelectEmailOnly(event.target.checked), setSelectAll(false), setSelectDevice(false)\n                      // setSelectedNotificationOption([])\n                      ),\n                      inputProps: {\n                        \"aria-label\": \"controlled\"\n                      },\n                      style: {\n                        color: \"red\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 248,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Email Only\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 259,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-sm\",\n                    children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n                      checked: selectDevice,\n                      onChange: event => (setSelectDevice(event.target.checked), setSelectAll(false), setSelectEmailOnly(false)\n                      // setSelectedNotificationOption([])\n                      ),\n                      inputProps: {\n                        \"aria-label\": \"controlled\"\n                      },\n                      style: {\n                        color: \"red\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 262,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Device\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 273,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 21\n                }, this), selectEmailOnly && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                    children: \" Notification Email\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    name: \"options\",\n                    value: selectedNotificationOption,\n                    onChange: e => setSelectedNotificationOption(e.target.value.split(\",\")),\n                    className: \"form-control\",\n                    children: dataDeviceToken !== undefined && dataDeviceToken.map(i => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: i.deviceToken,\n                      children: i.email\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 293,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 23\n                }, this), selectDevice && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                    children: \" Notification Device\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 301,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    name: \"options\",\n                    value: selectedNotificationOption[0],\n                    onChange: e => setSelectedNotificationOption(e.target.value.split(\",\")),\n                    className: \"form-control\",\n                    children: dataDevice !== undefined && dataDevice.map(i => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: `${i}`,\n                      children: i\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 315,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 302,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                    children: \" Title Notification\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"nameProduct\",\n                    value: title,\n                    onChange: e => setTitle(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  id: \"editor-container\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                    children: \"Body Notification\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    name: \"body\",\n                    value: body,\n                    style: {\n                      height: \"200px\"\n                    },\n                    onChange: a => setBody(a.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 336,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                    children: \"Image Notification\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 346,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    accept: \"image/*\",\n                    onChange: e => setImages(e.target.files[0]),\n                    className: \"form-control\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 347,\n                    columnNumber: 23\n                  }, this), images !== undefined && /*#__PURE__*/_jsxDEV(\"img\", {\n                    className: \"img-preview\",\n                    style: {\n                      height: 100,\n                      width: 100,\n                      margin: \"10px\"\n                    },\n                    src: URL.createObjectURL(images),\n                    alt: `Image `\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 354,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 362,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                    children: \"Schedule Time\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 364,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"datetime-local\",\n                    value: scheduleTime,\n                    onChange: e => setScheduleTime(e.target.value),\n                    className: \"form-control\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 365,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  className: \"btn-blue btn-lg btn-big\",\n                  children: [/*#__PURE__*/_jsxDEV(FaCloudUploadAlt, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 374,\n                    columnNumber: 23\n                  }, this), \" \\xA0 ADD TO VIEW\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(NotificationAdd, \"EFs0k4PLxax3116ZmDrkHFJX5R0=\", false, function () {\n  return [useNavigate];\n});\n_c2 = NotificationAdd;\nexport default NotificationAdd;\nvar _c, _c2;\n$RefreshReg$(_c, \"StyledBreadcrumb\");\n$RefreshReg$(_c2, \"NotificationAdd\");","map":{"version":3,"names":["Breadcrumbs","HomeIcon","ExpandMoreIcon","emphasize","styled","Chip","MenuItem","Select","React","useEffect","useState","useRef","useCallback","Rating","FaCloudUploadAlt","Icon","Button","CloseIcon","api","useParams","TurndownService","Loading","Checkbox","ReactQuill","useNavigate","normalizeFileName","convertToWords","red","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","StyledBreadcrumb","theme","backgroundColor","palette","mode","grey","height","spacing","color","text","primary","fontWeight","typography","fontWeightRegular","boxShadow","shadows","_c","NotificationAdd","history","_s","navigate","reactQuillRef","fileExcel","setFileExcel","title","setTitle","body","setBody","images","setImages","scheduleTime","setScheduleTime","isLoading","setIsLoading","dataDeviceToken","setdataDeviceToken","AllDevices","setAllDevices","dataDevice","selectAll","setSelectAll","selectEmailOnly","setSelectEmailOnly","selectDevice","setSelectDevice","selectedNotificationOption","setSelectedNotificationOption","url","UrlIMG","currentTime","Date","data","localStorage","getItem","id","console","log","email","getDeviceToken","upfile","formData","FormData","append","response","post","headers","success","message","status","error","errorMessage","submitForm","e","preventDefault","jsonData","userId","tokens","length","token","join","topic","file","imageUrl","name","getTime","get","reduce","all","device","concat","deviceToken","children","fileName","_jsxFileName","lineNumber","columnNumber","className","component","href","label","icon","fontSize","deleteIcon","onSubmit","checked","onChange","event","target","inputProps","style","value","split","undefined","map","i","type","a","accept","files","width","margin","src","URL","createObjectURL","alt","_c2","$RefreshReg$"],"sources":["/Users/trinhdai/DATA/React_Native/BigShose2/client/website/src/components/admin/Notifications/Add.js"],"sourcesContent":["import Breadcrumbs from \"@mui/material/Breadcrumbs\";\nimport HomeIcon from \"@mui/icons-material/Home\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport { emphasize, styled } from \"@mui/material/styles\";\nimport Chip from \"@mui/material/Chip\";\n\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Select from \"@mui/material/Select\";\nimport React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport Rating from \"@mui/material/Rating\";\nimport { FaCloudUploadAlt } from \"react-icons/fa\";\nimport { Icon } from \"@mui/material\";\nimport Button from \"@mui/material/Button\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport api from \"../../../api/api\";\nimport { useParams } from \"react-router-dom\";\n// import { htmlToMarkdown } from 'html-to-markdown';\nimport TurndownService from \"turndown\";\nimport Loading from \"../../../components/loading\";\nimport Checkbox from \"@mui/material/Checkbox\";\n\nimport ReactQuill from \"react-quill\";\nimport \"react-quill/dist/quill.snow.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport { normalizeFileName, convertToWords } from \"../../../utils/formart\";\nimport { red } from \"@mui/material/colors\";\n\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\n//breadcrumb code\nconst StyledBreadcrumb = styled(Chip)(({ theme }) => {\n  const backgroundColor =\n    theme.palette.mode === \"light\"\n      ? theme.palette.grey[100]\n      : theme.palette.grey[800];\n  return {\n    backgroundColor,\n    height: theme.spacing(3),\n    color: theme.palette.text.primary,\n    fontWeight: theme.typography.fontWeightRegular,\n    \"&:hover, &:focus\": {\n      backgroundColor: emphasize(backgroundColor, 0.06),\n    },\n    \"&:active\": {\n      boxShadow: theme.shadows[1],\n      backgroundColor: emphasize(backgroundColor, 0.12),\n    },\n  };\n});\n\nconst NotificationAdd = ({ history }) => {\n  const navigate = useNavigate();\n\n  const reactQuillRef = useRef();\n\n  const [fileExcel, setFileExcel] = useState(null);\n\n  const [title, setTitle] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [images, setImages] = useState();\n  const [scheduleTime, setScheduleTime] = useState();\n  const [isLoading, setIsLoading] = useState(false);\n\n  const [dataDeviceToken, setdataDeviceToken] = useState();\n  const [AllDevices, setAllDevices] = useState([]);\n  const dataDevice = [\"android\", \"ios\", \"websites\"];\n\n  const [selectAll, setSelectAll] = useState(true);\n  const [selectEmailOnly, setSelectEmailOnly] = useState(false);\n  const [selectDevice, setSelectDevice] = useState(false);\n\n  const [selectedNotificationOption, setSelectedNotificationOption] = useState(\n    []\n  );\n  const url = \"http://192.168.10.110:6969/v1\";\n  const UrlIMG = \"http://192.168.10.110:6969/v1/resize?url=\";\n  const currentTime = new Date();\n\n  // const id = \"661256cbb03b0c689798ad33\";\n  // const email = \"account8@gmail.com\";\n\n  const data = localStorage.getItem(\"userData\");\n  const id = localStorage.getItem(\"_id\");\n  console.log('data.email',data.email)\n  // useEffect(() => {\n  //   if (data) {\n  //     setdataUser(JSON.parse(data));\n  //   }\n  // }, [id]);\n\n  useEffect(() => {\n    getDeviceToken();\n  }, [id]);\n\n  const upfile = async () => {\n    const formData = new FormData();\n    formData.append(\"files\", images);\n    try {\n      const response = await api.post(`${url}/uploads`, formData, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      });\n      toast.success(response.data.message);\n      return response.status;\n    } catch (error) {\n      // console.log(error)\n      if (error.response) {\n        const errorMessage = error.response.data.error;\n        toast.error(errorMessage);\n      } else {\n        toast.error(\"Something went wrong\");\n      }\n    }\n  };\n  const submitForm = async (e) => {\n    e.preventDefault();\n    if (title === \"\" || body === \"\") {\n      toast.error(\"Please input title,body enter\");\n    }\n    if(id){\n      toast.error(\"Id not found\");\n    }\n    try {\n      // setIsLoading(true);\n      const jsonData = {\n        userId:id,\n        title: title,\n        body: body,\n      };\n\n\n      if (selectAll) {\n        jsonData.tokens = selectedNotificationOption;\n      }\n      if (selectEmailOnly) {\n        if (selectedNotificationOption.length > 1) {\n          jsonData.tokens = selectedNotificationOption;\n        } else {\n          jsonData.token = selectedNotificationOption.join(\",\");\n        }\n      }\n\n      if (selectDevice) {\n        jsonData.topic = selectedNotificationOption.join(\",\");\n      }\n\n      if (images) {\n        const file = await upfile();\n        console.log(file);\n        // if(file===200){\n        jsonData.imageUrl = UrlIMG + images.name + \"&width=1000&height=1000\";\n        // }\n      }\n      scheduleTime?jsonData.scheduleTime=scheduleTime:jsonData.scheduleTime=new Date(currentTime.getTime() + 1 * 60000);\n\n\n      console.log(\"jsonData\", jsonData);\n      // setIsLoading(false);\n\n      const response = await api.post(`${url}/notification/news`, jsonData, {\n        headers: { \"Content-Type\": \"application/json\" },\n      });\n      if (response.status === 200) {\n        toast.success(response.data.message);\n        // navigate(\"/notification\");\n      } \n      // else {\n      //   toast.error(response.data.message);\n      // }\n      console.log(response);\n    } catch (error) {\n      console.error(\"Cấu hình lỗi:\", error.response);\n      toast.error(error.response.data.error);\n      setIsLoading(false);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const getDeviceToken = async () => {\n    try {\n      const response = await api.get(`${url}/notification/devicetoken`);\n      setdataDeviceToken(response.data);\n      const AllDevices = response.data.reduce((all, device) => {\n        return all.concat(device.deviceToken);\n      }, []);\n      setAllDevices(AllDevices);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  console.log(\"scheduleTime\", scheduleTime);\n\n  return (\n    <>\n      {isLoading ? (\n        <Loading />\n      ) : (\n        <div className=\"right-content w-100\">\n          <div className=\"card shadow border-0 w-100 flex-row p-4\">\n            <h5 className=\"mb-0\">Notification Add</h5>\n            <Breadcrumbs\n              aria-label=\"breadcrumb\"\n              className=\"ml-auto breadcrumbs_\"\n            >\n              <StyledBreadcrumb\n                component=\"a\"\n                href=\"/admin/dashboard\"\n                label=\"Dashboard\"\n                icon={<HomeIcon fontSize=\"small\" />}\n              />\n\n              <StyledBreadcrumb\n                component=\"a\"\n                label=\"Notification\"\n                href=\"/admin/notification/\"\n                deleteIcon={<ExpandMoreIcon />}\n              />\n              <StyledBreadcrumb\n                label=\"Notification Add\"\n                deleteIcon={<ExpandMoreIcon />}\n              />\n            </Breadcrumbs>\n          </div>\n\n          <div className=\"row22\">\n            <form className=\"form\" onSubmit={submitForm}>\n              <div className=\"row\">\n                <div className=\"col-sm\">\n                  <div className=\"card p-4\">\n                    <h5 className=\"mb-4\">Notification Information</h5>\n                    <div className=\"row\">\n                      <div className=\"col-sm\">\n                        <Checkbox\n                          checked={selectAll}\n                          onChange={(event) => (\n                            setSelectAll(event.target.checked),\n                            setSelectedNotificationOption(AllDevices),\n                            setSelectEmailOnly(false),\n                            setSelectDevice(false)\n                          )}\n                          inputProps={{ \"aria-label\": \"controlled\" }}\n                          style={{ color: \"red\" }}\n                        />\n                        <span>All</span>\n                      </div>\n                      <div className=\"col-sm\">\n                        <Checkbox\n                          checked={selectEmailOnly}\n                          onChange={(event) => (\n                            setSelectEmailOnly(event.target.checked),\n                            setSelectAll(false),\n                            setSelectDevice(false)\n                            // setSelectedNotificationOption([])\n                          )}\n                          inputProps={{ \"aria-label\": \"controlled\" }}\n                          style={{ color: \"red\" }}\n                        />\n                        <span>Email Only</span>\n                      </div>\n                      <div className=\"col-sm\">\n                        <Checkbox\n                          checked={selectDevice}\n                          onChange={(event) => (\n                            setSelectDevice(event.target.checked),\n                            setSelectAll(false),\n                            setSelectEmailOnly(false)\n                            // setSelectedNotificationOption([])\n                          )}\n                          inputProps={{ \"aria-label\": \"controlled\" }}\n                          style={{ color: \"red\" }}\n                        />\n                        <span>Device</span>\n                      </div>\n                    </div>\n                    <br />\n                    {selectEmailOnly && (\n                      <div className=\"form-group\">\n                        <h6> Notification Email</h6>\n                        <select\n                          name=\"options\"\n                          value={selectedNotificationOption}\n                          onChange={(e) =>\n                            setSelectedNotificationOption(\n                              e.target.value.split(\",\")\n                            )\n                          }\n                          className=\"form-control\"\n                        >\n                          {/* <option value=\"\">--Please choose an option--</option> */}\n                          {dataDeviceToken !== undefined &&\n                            dataDeviceToken.map((i) => (\n                              <option value={i.deviceToken}>{i.email}</option>\n                            ))}\n                        </select>\n                      </div>\n                    )}\n\n                    {selectDevice && (\n                      <div className=\"form-group\">\n                        <h6> Notification Device</h6>\n                        <select\n                          name=\"options\"\n                          value={selectedNotificationOption[0]}\n                          onChange={(e) =>\n                            setSelectedNotificationOption(\n                              e.target.value.split(\",\")\n                            )\n                          }\n                          className=\"form-control\"\n                        >\n                          {/* <option value=\"\">--Please choose an option--</option> */}\n                          {dataDevice !== undefined &&\n                            dataDevice.map((i) => (\n                              <option value={`${i}`}>{i}</option>\n                            ))}\n                        </select>\n                      </div>\n                    )}\n\n                    <br />\n                    <div className=\"form-group\">\n                      <h6> Title Notification</h6>\n                      <input\n                        type=\"text\"\n                        name=\"nameProduct\"\n                        value={title}\n                        onChange={(e) => setTitle(e.target.value)}\n                      />\n                    </div>\n\n                    <br />\n\n                    <div className=\"form-group\" id=\"editor-container\">\n                      <h6>Body Notification</h6>\n                      <textarea\n                        name=\"body\"\n                        value={body}\n                        style={{ height: \"200px\" }}\n                        onChange={(a) => setBody(a.target.value)}\n                      />\n                    </div>\n\n                    <br />\n                    <div className=\"form-group\">\n                      <h6>Image Notification</h6>\n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={(e) => setImages(e.target.files[0])}\n                        className=\"form-control\"\n                      />\n                      {images !== undefined && (\n                        <img\n                          className=\"img-preview\"\n                          style={{ height: 100, width: 100, margin: \"10px\" }}\n                          src={URL.createObjectURL(images)}\n                          alt={`Image `}\n                        />\n                      )}\n                    </div>\n                    <br />\n                    <div className=\"form-group\">\n                      <h6>Schedule Time</h6>\n                      <input\n                        type=\"datetime-local\"\n                        value={scheduleTime}\n                        onChange={(e) => setScheduleTime(e.target.value)}\n                        className=\"form-control\"\n                      />\n                    </div>\n\n                    <Button type=\"submit\" className=\"btn-blue btn-lg btn-big\">\n                      <FaCloudUploadAlt /> &nbsp; ADD TO VIEW\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </form>\n            <br />\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default NotificationAdd;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}