{"ast":null,"code":"import React,{useEffect,useContext,useState,useRef}from\"react\";import Slider from\"react-slick\";import\"./index.css\";import Newsletter from\"../../../common/newsletter\";import{UserContext}from\"../../../../pages/UserPage\";import api from\"../../../../api/api\";import{baseURL_}from\"../../../../utils/env\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HomeSlider=()=>{const[dataIMG,setDataIMG]=useState([]);const[animationCompleted,setAnimationCompleted]=useState(true);const context=useContext(UserContext);const sliderRef=useRef(null);useEffect(()=>{listIMG();},[]);const listIMG=async()=>{const list=await api.get(\"\".concat(baseURL_,\"/imgshose\"));const findImage=list.data.data.map(img=>img.images).flat();const uniqueImages=[...new Set(findImage)];setDataIMG(uniqueImages);};useEffect(()=>{const interval=setInterval(()=>{if(sliderRef.current&&animationCompleted){sliderRef.current.slickNext();setAnimationCompleted(false);}},5000);return()=>clearInterval(interval);},[]);const getRandomImages=()=>{let selectedImages=[];let availableImages=[...dataIMG];for(let i=0;i<4;i++){const randomIndex=Math.floor(Math.random()*availableImages.length);selectedImages.push(availableImages[randomIndex]);availableImages.splice(randomIndex,1);}return selectedImages;};const settings={dots:true,infinite:true,speed:500,slidesToShow:1,slidesToScroll:1,arrows:false,autoplay:false,fade:true,afterChange:currentSlide=>{const images=document.querySelectorAll(\".image\");images.forEach(image=>image.classList.remove(\"active\"));setTimeout(()=>{images.forEach(image=>image.classList.add(\"active\"));setAnimationCompleted(true);},6000);}};return/*#__PURE__*/_jsx(\"section\",{className:\"homeSlider\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid position-relative\",children:[/*#__PURE__*/_jsx(Slider,{ref:sliderRef,...settings,className:\"home_slider_Main\",children:dataIMG.length>=4&&Array.from({length:Math.ceil(dataIMG.length/4)}).map((_,index)=>{const[leftImage,topImage,rightImage,bottomImage]=getRandomImages();return/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"image-merge-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"zoom-out \".concat(animationCompleted?'hidden':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"left-image\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(baseURL_,\"/resize?url=\").concat(leftImage,\"&width=500&height=600\"),alt:\"Left Image\",className:\"image slide-from-left\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"top-image\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(baseURL_,\"/resize?url=\").concat(topImage,\"&width=500&height=600\"),alt:\"Top Image\",className:\"image slide-from-top\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"right-image\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(baseURL_,\"/resize?url=\").concat(rightImage,\"&width=500&height=600\"),alt:\"Right Image\",className:\"image slide-from-right\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bottom-image \".concat(animationCompleted?'':'hidden'),children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(baseURL_,\"/resize?url=\").concat(bottomImage,\"&width=1000&height=600\"),alt:\"Bottom Image\",className:\"image zoom-in \".concat(animationCompleted?\"active\":\"\")})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"mb-4\",children:[\"Don\\u2019t miss amazing\",/*#__PURE__*/_jsx(\"br\",{}),\"grocery deals\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Sign up for the daily newsletter\"})]})]},index);})}),context.windowWidth>992&&/*#__PURE__*/_jsx(Newsletter,{})]})});};export default HomeSlider;","map":{"version":3,"names":["React","useEffect","useContext","useState","useRef","Slider","Newsletter","UserContext","api","baseURL_","jsx","_jsx","jsxs","_jsxs","HomeSlider","dataIMG","setDataIMG","animationCompleted","setAnimationCompleted","context","sliderRef","listIMG","list","get","concat","findImage","data","map","img","images","flat","uniqueImages","Set","interval","setInterval","current","slickNext","clearInterval","getRandomImages","selectedImages","availableImages","i","randomIndex","Math","floor","random","length","push","splice","settings","dots","infinite","speed","slidesToShow","slidesToScroll","arrows","autoplay","fade","afterChange","currentSlide","document","querySelectorAll","forEach","image","classList","remove","setTimeout","add","className","children","ref","Array","from","ceil","_","index","leftImage","topImage","rightImage","bottomImage","src","alt","windowWidth"],"sources":["/Users/trinhdai/DATA/React_Native/BigShose2/client/website/src/components/user/Home/slider/index.js"],"sourcesContent":["import React, { useEffect, useContext, useState, useRef } from \"react\";\r\nimport Slider from \"react-slick\";\r\nimport \"./index.css\";\r\nimport Newsletter from \"../../../common/newsletter\";\r\nimport { UserContext } from \"../../../../pages/UserPage\";\r\nimport api from \"../../../../api/api\";\r\nimport { baseURL_ } from \"../../../../utils/env\";\r\n\r\nconst HomeSlider = () => {\r\n  const [dataIMG, setDataIMG] = useState([]);\r\n  const [animationCompleted, setAnimationCompleted] = useState(true);\r\n  const context = useContext(UserContext);\r\n  const sliderRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    listIMG();\r\n  }, []);\r\n\r\n  const listIMG = async () => {\r\n    const list = await api.get(`${baseURL_}/imgshose`);\r\n    const findImage = list.data.data.map((img) => img.images).flat();\r\n    const uniqueImages = [...new Set(findImage)];\r\n    setDataIMG(uniqueImages);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      if (sliderRef.current && animationCompleted ) {\r\n        sliderRef.current.slickNext();\r\n        setAnimationCompleted(false)\r\n      }\r\n    }, 5000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const getRandomImages = () => {\r\n    let selectedImages = [];\r\n    let availableImages = [...dataIMG];\r\n    for (let i = 0; i < 4; i++) {\r\n      const randomIndex = Math.floor(Math.random() * availableImages.length);\r\n      selectedImages.push(availableImages[randomIndex]);\r\n      availableImages.splice(randomIndex, 1);\r\n    }\r\n    return selectedImages;\r\n  };\r\n\r\n  const settings = {\r\n    dots: true,\r\n    infinite: true,\r\n    speed: 500,\r\n    slidesToShow: 1,\r\n    slidesToScroll: 1,\r\n    arrows: false,\r\n    autoplay: false,\r\n    fade: true,\r\n    afterChange: (currentSlide) => {\r\n        const images = document.querySelectorAll(\".image\");\r\n        images.forEach((image) => image.classList.remove(\"active\"));\r\n        setTimeout(() => {\r\n          images.forEach((image) => image.classList.add(\"active\"));\r\n          setAnimationCompleted(true);\r\n        }, 6000); \r\n      },                \r\n  };\r\n\r\n  return (\r\n    <section className=\"homeSlider\">\r\n      <div className=\"container-fluid position-relative\">\r\n        <Slider ref={sliderRef} {...settings} className=\"home_slider_Main\">\r\n          {dataIMG.length >= 4 &&\r\n            Array.from({ length: Math.ceil(dataIMG.length / 4) }).map(\r\n              (_, index) => {\r\n                const [leftImage, topImage, rightImage, bottomImage] =\r\n                  getRandomImages();\r\n                return (\r\n                  <div key={index} className=\"item\">\r\n                    <div className=\"image-merge-container\">\r\n                      <div className={`zoom-out ${animationCompleted ? 'hidden' : ''}`}>\r\n                        <div className=\"left-image\">\r\n                          <img\r\n                            src={`${baseURL_}/resize?url=${leftImage}&width=500&height=600`}\r\n                            alt=\"Left Image\"\r\n                            className=\"image slide-from-left\"\r\n                          />\r\n                        </div>\r\n                        <div className=\"top-image\">\r\n                          <img\r\n                            src={`${baseURL_}/resize?url=${topImage}&width=500&height=600`}\r\n                            alt=\"Top Image\"\r\n                            className=\"image slide-from-top\"\r\n                          />\r\n                        </div>\r\n                        <div className=\"right-image\">\r\n                          <img\r\n                            src={`${baseURL_}/resize?url=${rightImage}&width=500&height=600`}\r\n                            alt=\"Right Image\"\r\n                            className=\"image slide-from-right\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                      <div className={`bottom-image ${animationCompleted ? '' : 'hidden'}`}>\r\n                        <img\r\n                          src={`${baseURL_}/resize?url=${bottomImage}&width=1000&height=600`}\r\n                          alt=\"Bottom Image\"\r\n                          className={`image zoom-in ${animationCompleted ? \"active\" : \"\"}`}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"info\">\r\n                      <h2 className=\"mb-4\">\r\n                        Donâ€™t miss amazing\r\n                        <br />\r\n                        grocery deals\r\n                      </h2>\r\n                      <p>Sign up for the daily newsletter</p>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              }\r\n            )}\r\n        </Slider>\r\n\r\n        {context.windowWidth > 992 && <Newsletter />}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default HomeSlider;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}